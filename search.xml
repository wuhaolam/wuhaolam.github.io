<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>文本处理三剑客</title>
      <link href="/archives/8b87eef8.html"/>
      <url>/archives/8b87eef8.html</url>
      
        <content type="html"><![CDATA[<h1 id="文本处理三剑客之grep"><a href="#文本处理三剑客之grep" class="headerlink" title="文本处理三剑客之grep"></a>文本处理三剑客之grep</h1><h2 id="一、grep"><a href="#一、grep" class="headerlink" title="一、grep"></a>一、grep</h2><p>​    </p><p>grep：</p><p>​    作用：文本搜索工具，根据指定的“模式”来对需要处理的文本逐行进行检查，打印匹配到的行</p><p>​    模式：由正则表达式及字符构成的搜索条件</p><p>​    格式：<code>grep [OPTION]    PATTERN    [FILE...]</code></p><p><strong>常见选项</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-color=auto    对匹配到的文本进行着色显示，默认</span><br><span class="line">-m <span class="comment">#           匹配#次后停止</span></span><br><span class="line">-v             显示没有被pattern匹配到的行，即取反</span><br><span class="line">-i             忽略字符大小写</span><br><span class="line">-n             显示匹配的行号</span><br><span class="line">-c             统计匹配的行数</span><br><span class="line">-o             仅显示匹配到的字符串</span><br><span class="line">-q             静默模式，不输出任何信息</span><br><span class="line">-A <span class="comment">#           after，后#行</span></span><br><span class="line">-B <span class="comment">#           before，前#行</span></span><br><span class="line">-C <span class="comment">#           context，前后各#行</span></span><br><span class="line">-e             实现多个选项间的逻辑or关系，如grep –e <span class="string">&#x27;cat&#x27;</span> -e <span class="string">&#x27;dog&#x27;</span> file</span><br><span class="line">-w             匹配整个单词</span><br><span class="line">-E             使用扩展的正则表达式，相当于egrep</span><br><span class="line">-F             不支持正则表达式，相当于fgrep</span><br><span class="line">-f file        根据模式文件处理,将一个文件作为模式的条件</span><br><span class="line">-r             递归目录，但不处理软链接</span><br><span class="line">-R             递归目录，处理软链接</span><br></pre></td></tr></table></figure><h3 id="范例"><a href="#范例" class="headerlink" title="范例"></a>范例</h3><p><strong>（1）取两个文件相同的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将a.txt文件作为条件匹配b.txt文件中的内容</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat a.txt </span></span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">a</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat b.txt </span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">a</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep -f a.txt b.txt </span></span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">a</span><br></pre></td></tr></table></figure><p><strong>（2）分区利用率最大的值</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># df | grep &#x27;^/dev/sd&#x27; | tr -s &#x27; &#x27; | cut -d&#x27; &#x27; -f5 | sort -n | tail -1</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># df | grep &#x27;^/dev/sd&#x27; | grep -o &#x27;\&lt;[0-9]\&#123;,3\&#125;%&#x27; | sort -nr | head -n1</span></span><br></pre></td></tr></table></figure><p><strong>（3）连接当前主机最多的前3个IP及连接数</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># ss -nt | grep &#x27;^ESTAB&#x27; | tr -s &#x27; &#x27; : | cut -d: -f6 | sort | uniq -c | sort -nr | head -n3</span></span><br></pre></td></tr></table></figure><p><strong>（4）统计当前连接状态</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># ss -nta | grep -v &#x27;^State&#x27; | cut -d&quot; &quot; -f1 | sort | uniq -c</span></span><br></pre></td></tr></table></figure><p><strong>（5）显示 /etc/profile 文件中非#开头及空白行的内容</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep -v &quot;^#&quot; /etc/profile | grep -v &#x27;^$&#x27;</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep -v -e &quot;^#&quot; -e &quot;^$&quot; /etc/profile</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep -v &#x27;^#\|^$&#x27; /etc/profile</span></span><br></pre></td></tr></table></figure><p><strong>（6）显示IP地址相关信息</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># ifconfig | grep -E &#x27;([0-9]&#123;1,3&#125;.)&#123;3&#125;[0-9]&#123;1,3&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>（7）算出所有人的年龄总和</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat age.txt </span></span><br><span class="line">xiaoming:20</span><br><span class="line">xiaohong:18</span><br><span class="line">xiaoqiang:22</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cut -d: -f2 age.txt | tr &#x27;\n&#x27; + | grep -Eo &quot;.*[0-9]&quot; | bc</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep -Eo &#x27;[0-9]+&#x27; age.txt | tr &#x27;\n&#x27; + | grep -Eo &quot;.*[0-9]&quot; | bc</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep -Eo &#x27;[0-9]+&#x27; age.txt | paste -s -d+ | bc</span></span><br></pre></td></tr></table></figure><p><strong>（8）其它选项示例</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep -w root /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep &#x27;\&lt;root\&gt;&#x27; /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep -E &quot;^(.*)\&gt;.*\&lt;\1$&quot; /etc/passwd</span></span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br></pre></td></tr></table></figure><hr><h1 id="文本处理三剑客之sed"><a href="#文本处理三剑客之sed" class="headerlink" title="文本处理三剑客之sed"></a>文本处理三剑客之sed</h1><h2 id="一、sed"><a href="#一、sed" class="headerlink" title="一、sed"></a>一、sed</h2><h3 id="1-1-sed-工作原理"><a href="#1-1-sed-工作原理" class="headerlink" title="1.1 sed 工作原理"></a>1.1 sed 工作原理</h3><p>​    当sed处理某个文件时，首先读取该文件的第一行进入到模式空间中，然后使用sed命令处理该模式空间中的内容，处理完成后，将模式空间中的内容输出到屏幕，接着处理下一行，直至文件末尾。</p><p>​    sed命令默认执行的是p操作，即打印操作，当没有指定特定的操作时，直接将该内容输出至屏幕；如果模式空间中执行了打印操作，那么该行内容就会被打印输出至屏幕，模式空间中的内容默认打印至屏幕，这是该行内容在屏幕上就会出现两次。</p><h3 id="1-2-sed基本用法"><a href="#1-2-sed基本用法" class="headerlink" title="1.2 sed基本用法"></a>1.2 sed基本用法</h3><p><strong>SYNOPSIS</strong><br>       <code>sed [OPTION]... &#123;script-only-if-no-other-script&#125; [input-file]...</code></p><p><strong>常用选项：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-n        不输出模式空间中的内容至屏幕，即不自动打印</span><br><span class="line">-e        多点编辑</span><br><span class="line">-f FILE   从指定的文件中读取编辑脚本</span><br><span class="line">-r,-E     使用扩展的正则表达式</span><br><span class="line">-i.bak    备份文件并原处编辑</span><br><span class="line">-s        将多个文件视为独立文件</span><br></pre></td></tr></table></figure><p><strong>script 格式：地址+命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 地址格式</span></span><br><span class="line">1. 没有给地址范围，默认对全文做处理</span><br><span class="line">2. 单个地址</span><br><span class="line">   <span class="comment">#：指定第#行</span></span><br><span class="line">   $：最后一行</span><br><span class="line">   /pattern/：被模式匹配到的每一行</span><br><span class="line">3. 地址范围</span><br><span class="line">   <span class="comment">#,#                从第#行到第#行</span></span><br><span class="line">   <span class="comment">#,+#               如3,+4;从第3行到第7行</span></span><br><span class="line">   /pat1/,/pat2/      从被pat1模式匹配到的行到被pat2模式匹配到的行</span><br><span class="line">   <span class="comment">#,/pat/</span></span><br><span class="line">   /pat/,<span class="comment">#</span></span><br><span class="line">4. 步进 ~</span><br><span class="line">   1~2    奇数行</span><br><span class="line">   2~2    偶数行</span><br><span class="line">   </span><br><span class="line"><span class="comment"># 命令</span></span><br><span class="line">p                    打印当前模式空间中的内容，追加到默认输出之后</span><br><span class="line">Ip                   忽略大小写输出</span><br><span class="line">d                    删除模式空间中匹配到的行，并读取下一行内容进行处理</span><br><span class="line">a [\]text            在指定行后面追加文本，支持使用\n实现多行追加</span><br><span class="line">i [\]text            在行前面插入文本</span><br><span class="line">c [\]text            替换行为单行或多行文本</span><br><span class="line">w file               保存模式匹配到的行到指定文件</span><br><span class="line">r file               读取指定文件的文本至模式空间中匹配到的行后</span><br><span class="line">=                    为模式空间中的行打印行号</span><br><span class="line">!                    模式空间中匹配行取反处理</span><br><span class="line">q                    退出sed</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找替换</span></span><br><span class="line">s/pattern/string/修饰符            分隔符可以是s@@@或s<span class="comment">###</span></span><br><span class="line">替换时可用修饰符：</span><br><span class="line">  g    行内全局替换</span><br><span class="line">  p    显示替换成功的行</span><br><span class="line">  w /PATH/FILE    将替换成功的行保存至文件中</span><br><span class="line">  I,i  忽略大小写</span><br></pre></td></tr></table></figure><h4 id="简单示例"><a href="#简单示例" class="headerlink" title="简单示例"></a>简单示例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># sed &#x27;&#x27; /etc/issue</span></span><br><span class="line">\S</span><br><span class="line">Kernel \r on an \m</span><br><span class="line"></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># sed &#x27;p&#x27; /etc/issue</span></span><br><span class="line">\S</span><br><span class="line">\S</span><br><span class="line">Kernel \r on an \m</span><br><span class="line">Kernel \r on an \m</span><br><span class="line"></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># ifconfig ens33 | sed -n &#x27;2p&#x27;</span></span><br><span class="line">        inet 192.168.119.128  netmask 255.255.255.0  broadcast 192.168.119.255</span><br><span class="line"></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># ifconfig ens33 | sed -n &#x27;/netmask/p&#x27;</span></span><br><span class="line">        inet 192.168.119.128  netmask 255.255.255.0  broadcast 192.168.119.255</span><br><span class="line"></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># sed -n &#x27;$p&#x27; /etc/passwd</span></span><br><span class="line">saslauth:x:994:76:Saslauthd user:/run/saslauthd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># df | sed -n &#x27;/^\/dev\/sd/p&#x27;</span></span><br><span class="line">/dev/sda1             1038336  216624    821712  21% /boot</span><br><span class="line"></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># seq 10 | sed -n &#x27;1,2p&#x27;</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line"></span><br><span class="line"><span class="comment"># seq.log 文件中有1~5行数</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># sed -e &#x27;2d&#x27; -e &#x27;5d&#x27; seq.log </span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示非注释行和空行</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># sed &#x27;/^#/d;/^$/d&#x27; /etc/profile</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实时编辑seq.log文件，并备份原来的文件</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat seq.log</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># sed -i.bak &#x27;2d;3d&#x27; seq.log</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat seq.log;cat seq.log.bak </span></span><br><span class="line">1</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除/etc/fstab文件中所有非#开头的行</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># sed -n &#x27;/^#/!p&#x27; /etc/fstab</span></span><br></pre></td></tr></table></figure><h4 id="范例-1"><a href="#范例-1" class="headerlink" title="范例"></a>范例</h4><p><strong>（1）修改网卡名为eth0，并使其生效</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># sed -Ei.bak &#x27;/^GRUB_CMDLINE_LINUX/s/(.*)(&quot;)$/\1 net.ifnames=0\2/&#x27; /etc/default/grub</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># grub2-mkconfig -o /boot/grub2/grub.cfg</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure><p><strong>（2）取IP地址</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># ifconfig eth0 | sed -nr &#x27;2s/[^0-9]+([0-9.]+).*/\1/p&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>（3）取基名和目录名</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取基名</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># echo &quot;/etc/sysconfig/network-scripts/&quot; | sed -r &#x27;s@(^/.*/)([^/]+/?)@\2@&#x27;</span></span><br><span class="line"><span class="comment"># 取目录名</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># echo &quot;/etc/sysconfig/network-scripts/&quot; | sed -r &#x27;s@(^/.*/)([^/]+/?)@\1@&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>（4）取文件的前缀和后缀</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg</span><br><span class="line"><span class="comment"># 取前缀</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># ls | sed -En &#x27;s/(.*)\.([^.]+)/\1/p&#x27;</span></span><br><span class="line"><span class="comment"># 取后缀</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># ls | sed -En &#x27;s/(.*)\.([^.]+)/\2/p&#x27;</span></span><br><span class="line"><span class="comment"># 同理，当想取更多的后缀时</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># echo a.b.c.tar.gz | sed -nr &#x27;s@.*\.([^.]+)\.([^.]+)@\1.\2@p&#x27;</span></span><br><span class="line">tar.gz</span><br></pre></td></tr></table></figure><p><strong>（5）将非#开头的行加#</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &quot;&amp;&quot;表示引用前面匹配到的所有内容</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># sed -nr &#x27;s/^[^#]/#&amp;/p&#x27; /etc/fstab</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># sed -nr &#x27;s/^[^#](.*)/#\1/p&#x27; /etc/fstab</span></span><br></pre></td></tr></table></figure><p><strong>（6）取分区利用率</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># df | sed -nr &#x27;/^\/dev\/sd/s@ .* ([0-9]+)%.*@ \1@p&#x27;</span></span><br><span class="line">/dev/sda1 15</span><br><span class="line">/dev/sdb1 55</span><br><span class="line">/dev/sdc1 56</span><br></pre></td></tr></table></figure><p><strong>（7）查看配置文件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># yum -y install httpd</span></span><br><span class="line"><span class="comment"># 删除空行和以#开头的行</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># sed -r &#x27;/^(#|$)/d&#x27; /etc/httpd/conf/httpd.conf</span></span><br><span class="line"><span class="comment"># 将行首后添加多个空白符之后有#的行也删除</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># sed  -e &#x27;/^$/d&#x27; -e &#x27;/^[[:space:]]*#/d&#x27; /etc/httpd/conf/httpd.conf</span></span><br></pre></td></tr></table></figure><p><strong>（8）引用变量</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># echo | sed &quot;s/^/$RANDOM/&quot;</span></span><br><span class="line">29428</span><br></pre></td></tr></table></figure><h3 id="1-3-sed高级用法"><a href="#1-3-sed高级用法" class="headerlink" title="1.3 sed高级用法"></a>1.3 sed高级用法</h3>]]></content>
      
      
      <categories>
          
          <category> Linux基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文本处理工具与正则表达式</title>
      <link href="/archives/bd60744f.html"/>
      <url>/archives/bd60744f.html</url>
      
        <content type="html"><![CDATA[<h1 id="文本编辑工具-vim"><a href="#文本编辑工具-vim" class="headerlink" title="文本编辑工具 vim"></a>文本编辑工具 vim</h1><p><strong>vi 和 vim 简介</strong></p><p>​    vi 是文本编辑器，vim 是 vi 的增强版。</p><img src="https://cdn.jsdelivr.net/gh/wuhaolam/picgo_demo/img/image-20220817084311877.png" alt="image-20220817084311877"  /><h2 id="一、vim-的常见模式和转换"><a href="#一、vim-的常见模式和转换" class="headerlink" title="一、vim 的常见模式和转换"></a>一、vim 的常见模式和转换</h2><p><strong>1、三种常见模式</strong></p><ul><li>命令或普通模式    vim 打开一个文件的默认启动模式，可以实现光标移动、剪切/粘贴文本</li><li>插入或编辑模式    修改文本</li><li>扩展命令或命令（末）行模式    保存、退出等</li></ul><p><strong>2、模式之间的转换</strong></p><p>命令模式 —&gt; 插入模式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">i insert，在光标所在处插入</span><br><span class="line">I在当前光标所在行的行首输入</span><br><span class="line">aappend，在光标所在处后面插入</span><br><span class="line">A在当前光标所在行的行尾输入</span><br><span class="line">o在光标所在行的下方插入一个新行</span><br><span class="line">O在当前光标所在行的上方打开一个新行</span><br></pre></td></tr></table></figure><p>插入模式 —&gt; 命令模式        Esc</p><p>命令模式 —&gt; 末行模式        :</p><p>末行模式 —&gt; 命令模式        Esc，Enter</p><h2 id="二、末行模式"><a href="#二、末行模式" class="headerlink" title="二、末行模式"></a>二、末行模式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按 : 进入末行模式</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># vi /etc/shadow</span></span><br><span class="line">  1 root:$6$gwZKY4RbKMpHlO7S<span class="variable">$FztMVac</span>/skadP5/ALb.KQvjNRS4CvFcpiD8FfGPPMcbPahW/LfsEXHQXfz.f3eTVpMFvaDQCPLeX/dAPElpjK0::0:99999:7:::</span><br><span class="line">  2 bin:*:18700:0:99999:7:::</span><br><span class="line">  3 daemon:*:18700:0:99999:7:::</span><br><span class="line">···</span><br><span class="line">···</span><br><span class="line"> 26 saslauth:!!:19078::::::</span><br><span class="line">~                                                                                                        </span><br><span class="line">:</span><br></pre></td></tr></table></figure><h3 id="2-1-末行模式基本命令"><a href="#2-1-末行模式基本命令" class="headerlink" title="2.1 末行模式基本命令"></a>2.1 末行模式基本命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">w保存文件</span><br><span class="line">wq写入并退出</span><br><span class="line">x写入并退出</span><br><span class="line">X加密</span><br><span class="line">q退出</span><br><span class="line">q!强制退出</span><br><span class="line">r filename读入一个文件内容到当前文件的光标所在处</span><br><span class="line">wfilename将当前文件内容写入另一个文件中</span><br><span class="line">!<span class="built_in">command</span>在不退出vim的情况下，临时执行一个命令</span><br><span class="line">r!<span class="built_in">command</span>读入一个命令的输出到当前文件中</span><br></pre></td></tr></table></figure><h3 id="2-2-地址定界"><a href="#2-2-地址定界" class="headerlink" title="2.2 地址定界"></a>2.2 地址定界</h3><p>格式 <code>:start_pos,end_pos CMD</code></p><h4 id="2-2-1-地址定界格式"><a href="#2-2-1-地址定界格式" class="headerlink" title="2.2.1 地址定界格式"></a>2.2.1 地址定界格式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#具体第#行</span></span><br><span class="line"><span class="comment">#,#从第几行到第几行</span></span><br><span class="line"><span class="comment">#,+#例：3,+3 从第三行到第六行</span></span><br><span class="line">.当前行</span><br><span class="line">$最后一行</span><br><span class="line">.,$-1当前行到倒数第二行</span><br><span class="line">%全文</span><br><span class="line"></span><br><span class="line">/PATTERN/从当前行向下查找，直到匹配查找到的字符串。支持正则表达式</span><br><span class="line">/pat1/,/pat2/从第一个匹配到的模式开始到第二次匹配到的模式结束</span><br><span class="line"><span class="comment">#,/pat/从#行开始，到匹配到pattern的行结束</span></span><br><span class="line">/pat/,$从匹配到的第一个pat开始到文件末尾的所有行</span><br></pre></td></tr></table></figure><h4 id="2-2-2-地址定界后跟编辑命令"><a href="#2-2-2-地址定界后跟编辑命令" class="headerlink" title="2.2.2 地址定界后跟编辑命令"></a>2.2.2 地址定界后跟编辑命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">d删除</span><br><span class="line">y复制</span><br><span class="line">wfile将匹配到的行另存到指定文件中</span><br><span class="line">r file在指定位置插入指定文件的内容</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除2~5行</span></span><br><span class="line">:2,5d</span><br><span class="line"><span class="comment"># 在第五行读入指定文件的内容，在指定行下方插入</span></span><br><span class="line">:5 r /etc/shadow</span><br></pre></td></tr></table></figure><h3 id="2-3-查找替换"><a href="#2-3-查找替换" class="headerlink" title="2.3 查找替换"></a>2.3 查找替换</h3><h4 id="2-3-1-查找"><a href="#2-3-1-查找" class="headerlink" title="2.3.1 查找"></a>2.3.1 查找</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/PATTERN从当前光标所在处向文件尾部查找；</span><br><span class="line">?PATTERN从当前光标所在处向文件首部查找；</span><br><span class="line">  n：与命令同方向</span><br><span class="line">  N：与命令反方向</span><br><span class="line">例：</span><br><span class="line">?\&lt;love\&gt;     从当前光标处向文件首部查找love这个单词</span><br></pre></td></tr></table></figure><h4 id="2-3-2-查找并替换"><a href="#2-3-2-查找并替换" class="headerlink" title="2.3.2 查找并替换"></a>2.3.2 查找并替换</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">s: 在末行模式下完成查找替换操作</span><br><span class="line">s/要查找的内容/替换为的内容/修饰符</span><br><span class="line">要查找的内容：可使用模式</span><br><span class="line">替换为的内容：不能使用模式，但可以使用\1, \2, ...等后向引用符号；还可以使用“&amp;”引用前面查找时查找到的整个内容；</span><br><span class="line">修饰符：</span><br><span class="line">i: 忽略大小写</span><br><span class="line">g: 全局替换；默认情况下，每一行只替换第一次出现；</span><br><span class="line">查找替换中的分隔符/可替换为其它字符,否则就要用到转义符，例如</span><br><span class="line">s@@@</span><br><span class="line">s<span class="comment">###</span></span><br><span class="line">例：</span><br><span class="line">:%s/\/etc\/fstab/\/var\/log/g    或</span><br><span class="line">:%s@/var/log@/etc/fstab@g</span><br></pre></td></tr></table></figure><h3 id="2-4-定制-vim-工作特性"><a href="#2-4-定制-vim-工作特性" class="headerlink" title="2.4 定制 vim 工作特性"></a>2.4 定制 vim 工作特性</h3><p>使用末行模式的配置只是对当前vim进程有效，可将配置存放在文件中永久保存。</p><p>配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/vimrc    全局</span><br><span class="line">~/.vimrc      个人</span><br></pre></td></tr></table></figure><h4 id="2-4-1-行号"><a href="#2-4-1-行号" class="headerlink" title="2.4.1 行号"></a>2.4.1 行号</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">显示：<span class="built_in">set</span> number, 简写为<span class="built_in">set</span> nu</span><br><span class="line">取消显示：<span class="built_in">set</span> nonumber, 简写为<span class="built_in">set</span> nonu</span><br></pre></td></tr></table></figure><h4 id="2-4-2-忽略字符大小写"><a href="#2-4-2-忽略字符大小写" class="headerlink" title="2.4.2 忽略字符大小写"></a>2.4.2 忽略字符大小写</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> ic</span><br><span class="line">不忽略：<span class="built_in">set</span> noic</span><br></pre></td></tr></table></figure><h4 id="2-4-3-自动缩进"><a href="#2-4-3-自动缩进" class="headerlink" title="2.4.3 自动缩进"></a>2.4.3 自动缩进</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> ai</span><br><span class="line">禁用：<span class="built_in">set</span> noai</span><br></pre></td></tr></table></figure><h4 id="2-4-4-复制保留模式"><a href="#2-4-4-复制保留模式" class="headerlink" title="2.4.4 复制保留模式"></a>2.4.4 复制保留模式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> <span class="built_in">paste</span></span><br><span class="line">禁用：<span class="built_in">set</span> nopaste</span><br></pre></td></tr></table></figure><h4 id="2-4-5-显示Tab-l-和换行符-显示"><a href="#2-4-5-显示Tab-l-和换行符-显示" class="headerlink" title="2.4.5 显示Tab ^l 和换行符 $ 显示"></a>2.4.5 显示Tab ^l 和换行符 $ 显示</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> list</span><br><span class="line">禁用：<span class="built_in">set</span> nolist</span><br></pre></td></tr></table></figure><h4 id="2-4-6-高亮搜索"><a href="#2-4-6-高亮搜索" class="headerlink" title="2.4.6 高亮搜索"></a>2.4.6 高亮搜索</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> hlsearch</span><br><span class="line">禁用：<span class="built_in">set</span> nohl</span><br></pre></td></tr></table></figure><h4 id="2-4-7-语法高亮"><a href="#2-4-7-语法高亮" class="headerlink" title="2.4.7 语法高亮"></a>2.4.7 语法高亮</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：syntax on</span><br><span class="line">禁用：syntax off</span><br></pre></td></tr></table></figure><h4 id="2-4-8-文件格式"><a href="#2-4-8-文件格式" class="headerlink" title="2.4.8 文件格式"></a>2.4.8 文件格式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">启用windows格式：<span class="built_in">set</span> fileformat=dos</span><br><span class="line">启用unix格式：<span class="built_in">set</span> fileformat=unix</span><br><span class="line">简写 <span class="built_in">set</span> ff=dos|unix</span><br></pre></td></tr></table></figure><h4 id="2-4-9-Tab-用空格代替"><a href="#2-4-9-Tab-用空格代替" class="headerlink" title="2.4.9 Tab 用空格代替"></a>2.4.9 Tab 用空格代替</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> expandtab(<span class="built_in">set</span> et) 默认8个空格</span><br><span class="line">禁用：<span class="built_in">set</span> noet</span><br></pre></td></tr></table></figure><h4 id="2-4-10-Tab-用指定空格的个数代替"><a href="#2-4-10-Tab-用指定空格的个数代替" class="headerlink" title="2.4.10 Tab 用指定空格的个数代替"></a>2.4.10 Tab 用指定空格的个数代替</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> ts=<span class="comment">#   #为空格的个数</span></span><br></pre></td></tr></table></figure><h4 id="2-4-11-设置缩进宽度"><a href="#2-4-11-设置缩进宽度" class="headerlink" title="2.4.11 设置缩进宽度"></a>2.4.11 设置缩进宽度</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> sw=<span class="comment">##为空格的个数</span></span><br></pre></td></tr></table></figure><h4 id="2-4-12-设置文本宽度"><a href="#2-4-12-设置文本宽度" class="headerlink" title="2.4.12 设置文本宽度"></a>2.4.12 设置文本宽度</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> textwidth=65 (vim only) <span class="comment">#从左向右计数</span></span><br><span class="line"><span class="built_in">set</span> wrapmargin=15 <span class="comment">#从右到左计数</span></span><br></pre></td></tr></table></figure><h4 id="2-4-13-设置光标所在行的标识线"><a href="#2-4-13-设置光标所在行的标识线" class="headerlink" title="2.4.13 设置光标所在行的标识线"></a>2.4.13 设置光标所在行的标识线</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> cul</span><br><span class="line">禁用：<span class="built_in">set</span> nocul</span><br></pre></td></tr></table></figure><h4 id="2-4-14-加密"><a href="#2-4-14-加密" class="headerlink" title="2.4.14 加密"></a>2.4.14 加密</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> key=PASSWORD</span><br><span class="line">禁用：<span class="built_in">set</span> key=</span><br></pre></td></tr></table></figure><h4 id="2-4-15-了解更多"><a href="#2-4-15-了解更多" class="headerlink" title="2.4.15 了解更多"></a>2.4.15 了解更多</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> </span><br><span class="line"><span class="built_in">set</span> all</span><br></pre></td></tr></table></figure><h2 id="三、命令模式"><a href="#三、命令模式" class="headerlink" title="三、命令模式"></a>三、命令模式</h2><h3 id="3-1-退出vim"><a href="#3-1-退出vim" class="headerlink" title="3.1 退出vim"></a>3.1 退出vim</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZZ保存退出</span><br><span class="line">ZQ不保存退出</span><br></pre></td></tr></table></figure><h3 id="3-2-光标跳转"><a href="#3-2-光标跳转" class="headerlink" title="3.2 光标跳转"></a>3.2 光标跳转</h3><h4 id="3-2-1-字符间跳转"><a href="#3-2-1-字符间跳转" class="headerlink" title="3.2.1 字符间跳转"></a>3.2.1 字符间跳转</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">h左</span><br><span class="line">l右</span><br><span class="line">j下</span><br><span class="line">k上</span><br><span class="line"><span class="comment">#COMMAND跳转到由#指定的个数的字符</span></span><br></pre></td></tr></table></figure><h4 id="3-2-2-单词间跳转"><a href="#3-2-2-单词间跳转" class="headerlink" title="3.2.2 单词间跳转"></a>3.2.2 单词间跳转</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">w下一个单词的词首</span><br><span class="line">e当前或下一个单词的词尾</span><br><span class="line">b当前或前一个单词的词首</span><br><span class="line"><span class="comment">#COMMAND由#指定一次跳转的单词数</span></span><br></pre></td></tr></table></figure><h4 id="3-2-3-当前页跳转"><a href="#3-2-3-当前页跳转" class="headerlink" title="3.2.3 当前页跳转"></a>3.2.3 当前页跳转</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">H页首</span><br><span class="line">M页中间行</span><br><span class="line">L页底</span><br><span class="line">zt将光标所在当前行移到屏幕顶端</span><br><span class="line">zz将光标所在当前行移到屏幕中间</span><br><span class="line">zb将光标所在当前行移到屏幕底端</span><br></pre></td></tr></table></figure><h4 id="3-2-4-行首行尾跳转"><a href="#3-2-4-行首行尾跳转" class="headerlink" title="3.2.4 行首行尾跳转"></a>3.2.4 行首行尾跳转</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">^跳转至行首的第一个非空白字符</span><br><span class="line">0跳转至行首</span><br><span class="line">$跳转至行尾</span><br></pre></td></tr></table></figure><h4 id="3-2-5-行间移动"><a href="#3-2-5-行间移动" class="headerlink" title="3.2.5 行间移动"></a>3.2.5 行间移动</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">G最后一行</span><br><span class="line">gg第一行</span><br></pre></td></tr></table></figure><h4 id="3-2-6-句间移动"><a href="#3-2-6-句间移动" class="headerlink" title="3.2.6 句间移动"></a>3.2.6 句间移动</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">）下一句</span><br><span class="line">（上一句</span><br></pre></td></tr></table></figure><h4 id="3-2-7-段落间移动"><a href="#3-2-7-段落间移动" class="headerlink" title="3.2.7 段落间移动"></a>3.2.7 段落间移动</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#125;下一段</span><br><span class="line">&#123;上一段</span><br></pre></td></tr></table></figure><h4 id="3-2-8-命令模式翻屏操作"><a href="#3-2-8-命令模式翻屏操作" class="headerlink" title="3.2.8 命令模式翻屏操作"></a>3.2.8 命令模式翻屏操作</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+f 向文件尾部翻一屏,相当于Pagedown</span><br><span class="line">Ctrl+b 向文件首部翻一屏,相当于Pageup</span><br><span class="line">Ctrl+d 向文件尾部翻半屏</span><br><span class="line">Ctrl+u 向文件首部翻半屏</span><br></pre></td></tr></table></figure><h3 id="3-3-字符编辑"><a href="#3-3-字符编辑" class="headerlink" title="3.3 字符编辑"></a>3.3 字符编辑</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x剪切光标处的字符</span><br><span class="line"><span class="comment">#x剪切光标处起始的#个字符</span></span><br><span class="line">xp交换光标所在处的字符及其后面字符的位置</span><br><span class="line">~转换大小写</span><br><span class="line">J删除当前行后的换行符</span><br></pre></td></tr></table></figure><h3 id="3-4-替换命令"><a href="#3-4-替换命令" class="headerlink" title="3.4 替换命令"></a>3.4 替换命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">r只替换光标所在处的一个字符</span><br><span class="line">R切换成REPLACE模式（末行有 -- REPLACE -- 提示），按Esc键回到命令模式</span><br></pre></td></tr></table></figure><h3 id="3-5-删除命令（实际为剪切）"><a href="#3-5-删除命令（实际为剪切）" class="headerlink" title="3.5 删除命令（实际为剪切）"></a>3.5 删除命令（实际为剪切）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">d删除，可通过光标跳转字符，实现范围删除</span><br><span class="line">d$删除到行尾</span><br><span class="line">d^删除到非空行首</span><br><span class="line">d0删除到行首</span><br><span class="line">dw</span><br><span class="line">de</span><br><span class="line">db</span><br><span class="line"><span class="built_in">dd</span>删除光标所在的行</span><br><span class="line"><span class="comment">#dd多行删除</span></span><br><span class="line">D从当前光标位置一直删除到行尾，等同于d$</span><br></pre></td></tr></table></figure><h3 id="3-6-复制命令"><a href="#3-6-复制命令" class="headerlink" title="3.6 复制命令"></a>3.6 复制命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">y 复制，行为相似于d命令</span><br><span class="line">y$</span><br><span class="line">y0</span><br><span class="line">y^</span><br><span class="line">ye</span><br><span class="line">yw</span><br><span class="line">yb</span><br><span class="line"><span class="comment">#COMMAND</span></span><br><span class="line">yy：复制行</span><br><span class="line"><span class="comment">#yy 复制多行</span></span><br><span class="line"></span><br><span class="line">------ 类似于d命令 ------</span><br></pre></td></tr></table></figure><h3 id="3-7-粘贴命令"><a href="#3-7-粘贴命令" class="headerlink" title="3.7 粘贴命令"></a>3.7 粘贴命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p 缓冲区存的如果为整行，则粘贴当前光标所在行的下方；否则，则粘贴至当前光标所在处的后面</span><br><span class="line">P 缓冲区存的如果为整行，则粘贴当前光标所在行的上方；否则，则粘贴至当前光标所在处的前面</span><br></pre></td></tr></table></figure><h3 id="3-8-改变命令"><a href="#3-8-改变命令" class="headerlink" title="3.8 改变命令"></a>3.8 改变命令</h3><p>使用 c 命令后会进入到插入模式，用法类似于 d 命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">c$</span><br><span class="line">c^</span><br><span class="line">c0</span><br><span class="line">cb</span><br><span class="line">ce</span><br><span class="line">cw</span><br><span class="line"><span class="comment">#COMMAND</span></span><br><span class="line">cc <span class="comment">#删除当前行并输入新内容，相当于S</span></span><br><span class="line"><span class="comment">#cc</span></span><br><span class="line">C <span class="comment">#删除当前光标到行尾，并切换成插入模式,相当于c$</span></span><br></pre></td></tr></table></figure><h3 id="3-9-撤销更改"><a href="#3-9-撤销更改" class="headerlink" title="3.9 撤销更改"></a>3.9 撤销更改</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">u 撤销最近的更改，相当于windows中ctrl+z</span><br><span class="line"><span class="comment">#u 撤销之前多次更改</span></span><br><span class="line">U 撤消光标落在这行后所有此行的更改</span><br><span class="line">Ctrl-r 重做最后的“撤消”更改，相当于windows中crtl+y</span><br><span class="line">. 重复前一个操作</span><br><span class="line"><span class="comment">#. 重复前一个操作#次</span></span><br></pre></td></tr></table></figure><h2 id="四、可视化模式"><a href="#四、可视化模式" class="headerlink" title="四、可视化模式"></a>四、可视化模式</h2><p>进入到可视化模式，末行有“– – VISUAL – –”指示</p><p>可视化模式的类型</p><ul><li>v 面向字符  – VISUAL –</li><li>V 面向整行  – VISUAL LINE –</li><li>ctrl+v  面向块  – VISUAL BLOCK –</li></ul><p>进入到可视化模式，被选中的文字可被删除，复制，变更，过滤，搜索，替换等</p><p>范例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1、在文件指定行的行首插入<span class="comment">#</span></span><br><span class="line">- 先将光标移动到指定的第一行的行首</span><br><span class="line">- 输入ctrl+v 进入到可视化模式</span><br><span class="line">- 向下移动光标，选中希望操作的每一行的第一个字符</span><br><span class="line">- 输入大写字母 I 切换至插入模式</span><br><span class="line">- 输入 <span class="comment">#</span></span><br><span class="line">- 按 Esc 键</span><br></pre></td></tr></table></figure><h2 id="五、多文件模式"><a href="#五、多文件模式" class="headerlink" title="五、多文件模式"></a>五、多文件模式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim FILE1 FILE2 FILE3 ...</span><br><span class="line">:next 下一个</span><br><span class="line">:prev 前一个</span><br><span class="line">:first 第一个</span><br><span class="line">:last 最后一个</span><br><span class="line">:wall 保存所有</span><br><span class="line">:qall 不保存退出所有</span><br><span class="line">:wqall保存退出所有</span><br></pre></td></tr></table></figure><h2 id="六、多窗口模式"><a href="#六、多窗口模式" class="headerlink" title="六、多窗口模式"></a>六、多窗口模式</h2><p><strong>多文件模式</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim FILE1 FILE2 FILE3 ...</span><br><span class="line">:next 下一个</span><br><span class="line">:prev 前一个</span><br><span class="line">:first 第一个</span><br><span class="line">:last 最后一个</span><br><span class="line">:wall 保存所有</span><br><span class="line">:qall 退出所有</span><br></pre></td></tr></table></figure><p><strong>窗口分割模式</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vim -o|-O FILE1 FILE2 ...</span><br><span class="line">-o: 水平分割</span><br><span class="line">-O: 垂直分割</span><br><span class="line">在窗口间切换：Ctrl+w, Arrow</span><br><span class="line">单文件窗口分割：</span><br><span class="line"> Ctrl+w,s: <span class="built_in">split</span>, 水平分割</span><br><span class="line"> Ctrl+w,v: vertical, 垂直分割</span><br><span class="line"> ctrl+w,q：取消相邻窗口</span><br><span class="line">ctrl+w,o：取消全部窗口</span><br><span class="line">:wqall 退出</span><br></pre></td></tr></table></figure><hr><h1 id="文本常见处理工具"><a href="#文本常见处理工具" class="headerlink" title="文本常见处理工具"></a>文本常见处理工具</h1><h2 id="一、查看文件内容"><a href="#一、查看文件内容" class="headerlink" title="一、查看文件内容"></a>一、查看文件内容</h2><h3 id="1-1-查看文本文件内容"><a href="#1-1-查看文本文件内容" class="headerlink" title="1.1 查看文本文件内容"></a>1.1 查看文本文件内容</h3><h4 id="1-1-1-cat"><a href="#1-1-1-cat" class="headerlink" title="1.1.1 cat"></a>1.1.1 cat</h4><p>NAME<br>       cat - concatenate files and print on the standard output</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[option]</span><br><span class="line">  -E：显示行结束符$</span><br><span class="line">  -A：显示所有控制符</span><br><span class="line">  -n：对显示出的每一行进行编号</span><br><span class="line">  -b：只对非空行进行编号</span><br><span class="line">  -s：压缩连续的空行成一行</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">------------ 支持标准输入 -----------</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat &gt; file4</span></span><br><span class="line">aaa</span><br><span class="line">ss</span><br><span class="line"><span class="built_in">dd</span></span><br><span class="line">gg</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file4</span></span><br><span class="line">aaa</span><br><span class="line">ss</span><br><span class="line"><span class="built_in">dd</span></span><br><span class="line">gg</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat &gt;&gt; file4 &lt;&lt; EOF    // 多行重定向</span></span><br><span class="line">&gt; line5</span><br><span class="line">&gt; EOF</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file4</span></span><br><span class="line">aaa</span><br><span class="line">ss</span><br><span class="line"><span class="built_in">dd</span></span><br><span class="line">gg</span><br><span class="line">line5</span><br></pre></td></tr></table></figure><h4 id="1-1-2-nl（相当于-cat-b）"><a href="#1-1-2-nl（相当于-cat-b）" class="headerlink" title="1.1.2 nl（相当于 cat -b）"></a>1.1.2 nl（相当于 cat -b）</h4><p>NAME<br>       nl - number lines of files</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat -n file2</span></span><br><span class="line">     1  1</span><br><span class="line">     2  2</span><br><span class="line">     3  3</span><br><span class="line">     4</span><br><span class="line">     5  5</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># nl file2# nl 只对非空行进行编号</span></span><br><span class="line">     1  1</span><br><span class="line">     2  2</span><br><span class="line">     3  3</span><br><span class="line">       </span><br><span class="line">     4  5</span><br></pre></td></tr></table></figure><h4 id="1-1-3-tac"><a href="#1-1-3-tac" class="headerlink" title="1.1.3 tac"></a>1.1.3 tac</h4><p>NAME<br>       tac - concatenate and print files in reverse</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># tac file1</span></span><br><span class="line">5</span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">1</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file1</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h4 id="1-1-4-rev"><a href="#1-1-4-rev" class="headerlink" title="1.1.4 rev"></a>1.1.4 rev</h4><p>NAME<br>       rev - reverse lines characterwise</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file</span></span><br><span class="line">01234</span><br><span class="line">56789</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># tac file</span></span><br><span class="line">56789</span><br><span class="line">01234</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># rev file</span></span><br><span class="line">43210</span><br><span class="line">98765</span><br></pre></td></tr></table></figure><h3 id="1-2-查看非文本文件内容"><a href="#1-2-查看非文本文件内容" class="headerlink" title="1.2 查看非文本文件内容"></a>1.2 查看非文本文件内容</h3><h4 id="1-2-1-hexdump"><a href="#1-2-1-hexdump" class="headerlink" title="1.2.1 hexdump"></a>1.2.1 hexdump</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">NAME</span><br><span class="line">       hexdump - display file contents <span class="keyword">in</span> hexadecimal, decimal, octal, or ascii</span><br><span class="line">SYNOPSIS</span><br><span class="line">       hexdump [options] file...</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># hexdump -C -n 5 /dev/sda  </span></span><br><span class="line">00000000  eb 63 90 10 8e                                    |.c...|</span><br><span class="line">00000005</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo &#123;a..f&#125; | hexdump -C</span></span><br><span class="line">00000000  61 20 62 20 63 20 64 20  65 20 66 0a              |a b c d e f.|</span><br><span class="line">0000000c</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo &#123;a..f&#125; |tr -d &#x27; &#x27; | hexdump -C</span></span><br><span class="line">00000000  61 62 63 64 65 66 0a                              |abcdef.|</span><br><span class="line">00000007</span><br></pre></td></tr></table></figure><h4 id="1-2-2-od"><a href="#1-2-2-od" class="headerlink" title="1.2.2 od"></a>1.2.2 od</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">NAME</span><br><span class="line">       <span class="built_in">od</span> - dump files <span class="keyword">in</span> octal and other formats</span><br><span class="line">--------------------------------------------------------------------</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo &#123;a..z&#125; | tr -d &#x27; &#x27;|od -t x</span></span><br><span class="line">0000000 64636261 68676665 6c6b6a69 706f6e6d</span><br><span class="line">0000020 74737271 78777675 000a7a79</span><br><span class="line">0000033</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo &#123;a..z&#125; | tr -d &#x27; &#x27;|od -t x1</span></span><br><span class="line">0000000 61 62 63 64 65 66 67 68 69 6a 6b 6c 6d 6e 6f 70</span><br><span class="line">0000020 71 72 73 74 75 76 77 78 79 7a 0a</span><br><span class="line">0000033</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo &#123;a..f&#125; | tr -d &#x27; &#x27; |od -t x1z </span></span><br><span class="line">0000000 61 62 63 64 65 66 0a                             &gt;abcdef.&lt;</span><br><span class="line">0000007</span><br></pre></td></tr></table></figure><h4 id="1-2-3-xxd"><a href="#1-2-3-xxd" class="headerlink" title="1.2.3 xxd"></a>1.2.3 xxd</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NAME</span><br><span class="line">       xxd - make a hexdump or <span class="keyword">do</span> the reverse.</span><br><span class="line">-------------------------------------------------------------------</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo &#123;a..f&#125; | tr -d &#x27; &#x27; | xxd</span></span><br><span class="line">00000000: 6162 6364 6566 0a                        abcdef.</span><br></pre></td></tr></table></figure><h2 id="二、分页查看文件内容"><a href="#二、分页查看文件内容" class="headerlink" title="二、分页查看文件内容"></a>二、分页查看文件内容</h2><ul><li>more</li><li>less</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">more 和 less 都可实现文件的翻页</span><br><span class="line">使用 more 查看文件到末尾时会自动退出，而 less 不会</span><br><span class="line">less 查看文件时，支持使用模式匹配/文本 搜索文本  n/N 跳到下一个 或 上一个匹配</span><br></pre></td></tr></table></figure><h2 id="三、显示文本前或后行内容"><a href="#三、显示文本前或后行内容" class="headerlink" title="三、显示文本前或后行内容"></a>三、显示文本前或后行内容</h2><h3 id="3-1-head"><a href="#3-1-head" class="headerlink" title="3.1 head"></a>3.1 head</h3><p>选项：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-c <span class="comment">#指定获取前#字节</span></span><br><span class="line">-n <span class="comment">#指定获取前#行，#如果为负数，表示从文件头取到倒数第#行，不包括倒数第#行</span></span><br></pre></td></tr></table></figure><p>例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file1</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># head -n -3 file1</span></span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="3-2-tail"><a href="#3-2-tail" class="headerlink" title="3.2 tail"></a>3.2 tail</h3><p>选项</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-c <span class="comment">#指定获取后#个字节</span></span><br><span class="line">-n <span class="comment">#指定获取后#行，如果#前有加号，表示从第#行开始到文件结束</span></span><br><span class="line">-f跟踪显示文件中的内容，当文件删除在新建一个同名文件时，无法继续跟踪</span><br><span class="line">-F也可跟踪显示文件中的内容，当文件删除又新建一个同名文件时可继续追踪</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file1</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># tail -n +4 file1</span></span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h2 id="四、按列抽取文本-cut"><a href="#四、按列抽取文本-cut" class="headerlink" title="四、按列抽取文本 cut"></a>四、按列抽取文本 cut</h2><p>常用选项</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-dDELIMITER：指明分隔符，默认为 Tab</span><br><span class="line">-fFILEDS:</span><br><span class="line">  <span class="comment">#: 第#个字段</span></span><br><span class="line">    <span class="comment">#,#: 指定多个不连续的字段，如 1，3，5</span></span><br><span class="line">    <span class="comment">#-#: 连续的多个字段</span></span><br><span class="line">    混合使用:<span class="number">1</span>-<span class="number">3</span>,<span class="number">7</span></span><br><span class="line">-c按字符切割</span><br><span class="line">--output-delimiter=STRING指定输出分隔符</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># df | tail -n $(echo `df | wc -l`-1|bc)</span></span><br><span class="line">devtmpfs               897476       0    897476   0% /dev</span><br><span class="line">tmpfs                  916616       0    916616   0% /dev/shm</span><br><span class="line">tmpfs                  916616    8884    907732   1% /run</span><br><span class="line">tmpfs                  916616       0    916616   0% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/rl-root  31441920 1849564  29592356   6% /</span><br><span class="line">/dev/mapper/rl-data  17410832   45084  16458280   1% /data</span><br><span class="line">/dev/sda1             1038336  216624    821712  21% /boot</span><br><span class="line">tmpfs                  183320       0    183320   0% /run/user/0</span><br></pre></td></tr></table></figure><h2 id="五、合并多个文件-paste"><a href="#五、合并多个文件-paste" class="headerlink" title="五、合并多个文件 paste"></a>五、合并多个文件 paste</h2><p>常用选项</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-d DELIMITER: 指定分隔符，默认为 Tab</span><br><span class="line">-s所有行合成一行显示</span><br></pre></td></tr></table></figure><p>范例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat f1 </span></span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat f2</span></span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># paste -d &#x27; &#x27; f1 f2</span></span><br><span class="line">2 b</span><br><span class="line">3 c</span><br><span class="line">4 d</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># paste -s  -d &#x27; &#x27; f1 f2</span></span><br><span class="line">2 3 4</span><br><span class="line">b c d</span><br></pre></td></tr></table></figure><h2 id="六、分析文本的工具"><a href="#六、分析文本的工具" class="headerlink" title="六、分析文本的工具"></a>六、分析文本的工具</h2><h3 id="6-1-文本统计数据-wc"><a href="#6-1-文本统计数据-wc" class="headerlink" title="6.1 文本统计数据 wc"></a>6.1 文本统计数据 wc</h3><p>常用选项</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-l只计数行数</span><br><span class="line">-w只计数单词总数</span><br><span class="line">-c统计字节总数</span><br><span class="line">-L显示文件中最长行的长度</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># wc /etc/passwd</span></span><br><span class="line">  27   46    1262 /etc/passwd</span><br><span class="line"> 行数单词数  字节数</span><br></pre></td></tr></table></figure><h3 id="6-2-文本排序-sort"><a href="#6-2-文本排序-sort" class="headerlink" title="6.2 文本排序 sort"></a>6.2 文本排序 sort</h3><p>常用选项</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-r，--reversereverse the result of comparisons</span><br><span class="line">-R随机排序</span><br><span class="line">-n按照数字大小整理</span><br><span class="line">-h易读性排序，如 2M 1K</span><br><span class="line">-f忽略字符大小写</span><br><span class="line">-u去重</span><br><span class="line">-t指定字段分隔符</span><br><span class="line">-k<span class="comment">#对指定分隔符后的#列进行排序</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">============== 统计分区的利用率 ==============</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># df |tail -n $(echo `df | wc -l` -1 | bc) | tr -s &#x27; &#x27;| cut -d&#x27; &#x27; -f1,5 | sort -n -t&#x27; &#x27; -k2 -r</span></span><br><span class="line">/dev/sda1 <span class="number">21</span>%</span><br><span class="line">/dev/mapper/rl-root <span class="number">7</span>%</span><br><span class="line">tmpfs <span class="number">1</span>%</span><br><span class="line">/dev/mapper/rl-data <span class="number">1</span>%</span><br><span class="line">tmpfs <span class="number">0</span>%</span><br><span class="line">tmpfs <span class="number">0</span>%</span><br><span class="line">tmpfs <span class="number">0</span>%</span><br><span class="line">devtmpfs <span class="number">0</span>%</span><br><span class="line"></span><br><span class="line">============== 有两个文件，a.txt和b.txt，合并两个文件，并输出时确保每个数字唯一 =============</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat a.txt </span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat b.txt </span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat a.txt b.txt | sort -u</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="6-3-文本去重-uniq"><a href="#6-3-文本去重-uniq" class="headerlink" title="6.3 文本去重 uniq"></a>6.3 文本去重 uniq</h3><p>常用选项</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">-c显示每行重复出现的次数</span><br><span class="line">-d仅显示重复过的行</span><br><span class="line">-u仅显示没有重复的行</span><br><span class="line"><span class="comment">#      注：重复为连续且相同   #</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file3</span></span><br><span class="line"><span class="number">22</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">43</span></span><br><span class="line"><span class="number">23</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># uniq -d file3</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># uniq -u file3</span></span><br><span class="line"><span class="number">22</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">43</span></span><br><span class="line"><span class="number">23</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure><p>*** 常与 sort 命令一起使用***</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-- 并发连接最多的远程主机 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># ss -nt | grep &quot;ESTAB&quot; | tr -s &#x27; &#x27; : | cut -d: -f6 | sort | uniq -c | sort -nr</span></span><br><span class="line">      4 192.168.119.1</span><br><span class="line">      2 192.168.119.158</span><br><span class="line">      1 192.168.119.147</span><br><span class="line"></span><br><span class="line">-- 取两个文件的相同和不同的行 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat a.txt </span></span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat b.txt </span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 仅显示两个文件中相同的内容</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat a.txt b.txt | sort | uniq -d</span></span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示两个文件中没有重复的</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat a.txt b.txt | sort | uniq -u</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h3 id="6-4-比较文件"><a href="#6-4-比较文件" class="headerlink" title="6.4 比较文件"></a>6.4 比较文件</h3><h4 id="6-4-1-diff"><a href="#6-4-1-diff" class="headerlink" title="6.4.1 diff"></a>6.4.1 diff</h4><p><code>-u 选项，使用 unified 格式显示</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file1</span></span><br><span class="line">root</span><br><span class="line">nginx</span><br><span class="line">wh</span><br><span class="line">wuhao</span><br><span class="line">harry</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file2</span></span><br><span class="line">mage</span><br><span class="line">root</span><br><span class="line">wuhao</span><br><span class="line">apache</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># diff  -u file1 file2</span></span><br><span class="line">--- file1       2022-03-22 08:35:52.270539575 -0400</span><br><span class="line">+++ file2       2022-03-22 08:38:20.195502598 -0400</span><br><span class="line">@@ -1,5 +1,4 @@</span><br><span class="line">+mage</span><br><span class="line"> root</span><br><span class="line">-nginx</span><br><span class="line">-wh</span><br><span class="line"> wuhao</span><br><span class="line">-harry</span><br><span class="line">+apache</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># diff  -u file1 file2 &gt; f.patch</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># rm -f file2           // 删除file2文件</span></span><br><span class="line">-- 先将 file1 文件备份成file1.org，然后根据f.patch文件和file1文件恢复原来的file2文件，但此时名称命名为file1 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># patch -b file1 f.patch </span></span><br><span class="line">patching file file1</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file1      // 恢复的file2文件</span></span><br><span class="line">mage</span><br><span class="line">root</span><br><span class="line">wuhao</span><br><span class="line">apache</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat file1.orig </span></span><br><span class="line">root</span><br><span class="line">nginx</span><br><span class="line">wh</span><br><span class="line">wuhao</span><br><span class="line">harry</span><br></pre></td></tr></table></figure><h4 id="6-4-2-patch"><a href="#6-4-2-patch" class="headerlink" title="6.4.2 patch"></a>6.4.2 patch</h4><p>略</p><h4 id="6-4-3-vimdiff"><a href="#6-4-3-vimdiff" class="headerlink" title="6.4.3 vimdiff"></a>6.4.3 vimdiff</h4><p>略</p><h4 id="6-4-4-cmp"><a href="#6-4-4-cmp" class="headerlink" title="6.4.4 cmp"></a>6.4.4 cmp</h4><p>略</p><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>1、找出ifconfig “网卡名” 命令结果中本机的IPv4地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># ifconfig ens33 | tr -s &#x27; &#x27; | cut -d&#x27; &#x27; -f3 | sort -nr | head -1</span></span><br><span class="line">192.168.119.128</span><br></pre></td></tr></table></figure><p>2、查出分区空间使用率的最大百分比值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># df |tail -n $(echo `df | wc -l` -1 | bc) | tr -s &#x27; &#x27;| cut -d&#x27; &#x27; -f5 | sort -nr | head -n1</span></span><br><span class="line">21%</span><br></pre></td></tr></table></figure><p>3、查出用户UID最大值的用户名、UID及shell类型</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7-mini3 ~]<span class="comment"># sort -t: -k3 -n /etc/passwd | tail -1 | cut -d: -f 1,3,7</span></span><br><span class="line">wh:1000:/bin/bash</span><br></pre></td></tr></table></figure><p>4、查出/tmp的权限，以数字方式显示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7-mini3 ~]<span class="comment"># stat /tmp | tr -s &#x27;/(&#x27; &#x27; &#x27; | cut -d &#x27; &#x27; -f 2 | sed  -n &#x27;4p&#x27;</span></span><br><span class="line">1777</span><br></pre></td></tr></table></figure><p>5、统计当前连接本机的每个远程主机IP的连接数，并按从大到小排序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># ss -nt | grep &quot;ESTAB&quot; | tr -s &#x27; &#x27; : | cut -d: -f6 | sort | uniq -c | sort -nr</span></span><br><span class="line">      4 192.168.119.1</span><br><span class="line">      2 192.168.119.158</span><br><span class="line">      1 192.168.119.147</span><br></pre></td></tr></table></figure><hr><h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>通配符通常用来匹配文件名，而正则表达式是用来匹配文本中的字符串。</p><p>正则表达式分类：</p><ul><li>基本正则表达式</li><li>扩展正则表达式</li></ul><p>正则表达式的元字符分类：字符匹配、匹配次数、位置锚定、分组</p><p><em>注：grep命令的使用见文本处理三剑客文章</em></p><h2 id="一、基本正则表达式元字符"><a href="#一、基本正则表达式元字符" class="headerlink" title="一、基本正则表达式元字符"></a>一、基本正则表达式元字符</h2><h3 id="1-1-字符匹配"><a href="#1-1-字符匹配" class="headerlink" title="1.1 字符匹配"></a>1.1 字符匹配</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">.匹配任意单个字符，可以使一个汉字</span><br><span class="line">[]匹配指定范围内的任意单个字符</span><br><span class="line">[^]匹配指定范围外的任意单个字符</span><br><span class="line">[:alnum:]字母和数字</span><br><span class="line">[:alpha:]任意大小写字母</span><br><span class="line">[:lower:]任意小写字母</span><br><span class="line">[:upper:]任意大写字母</span><br><span class="line">[:blank:]空白字符（空格和制表符）</span><br><span class="line">[:space:]包括空格、制表符、换行符、回车符等各种类型的空白</span><br><span class="line">[:cntrl:]不能打印的控制字符（退格、删除、警铃···）</span><br><span class="line">[:digit:]十进制数字</span><br><span class="line">[:xdigit:]十六进制数字</span><br><span class="line">[:graph:]可打印的非空白字符</span><br><span class="line">[:<span class="built_in">print</span>:]可打印字符</span><br><span class="line">[:punct:]标点符号</span><br><span class="line"></span><br><span class="line">\w <span class="comment">#匹配单词构成部分，等价于[_[:alnum:]]</span></span><br><span class="line">\W <span class="comment">#匹配非单词构成部分，等价于[^_[:alnum:]]</span></span><br><span class="line">\S <span class="comment">#匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。</span></span><br><span class="line">\s <span class="comment">#匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。注意</span></span><br><span class="line">Unicode 正则表达式会匹配全角空格符</span><br></pre></td></tr></table></figure><h3 id="1-2-匹配次数"><a href="#1-2-匹配次数" class="headerlink" title="1.2 匹配次数"></a>1.2 匹配次数</h3><p>用在要指定次数的字符后面，用于指定前面的字符要出现的次数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*匹配前面的字符任意次，贪婪模式：尽可能长的匹配</span><br><span class="line">.*任意长度的任意字符</span><br><span class="line">\?匹配其前面的字符出现<span class="number">0</span>次或<span class="number">1</span>次</span><br><span class="line">\+匹配其前面的字符至少出现<span class="number">1</span>次</span><br><span class="line">\&#123;n\&#125;匹配前面的字符n次</span><br><span class="line">\&#123;m,n\&#125;匹配前面的字符至少m次，最多n次</span><br><span class="line">\&#123;,n\&#125;匹配前面的字符最多n次</span><br><span class="line">\&#123;m,\&#125;匹配前面的字符至少m次</span><br></pre></td></tr></table></figure><h3 id="1-3-位置锚定"><a href="#1-3-位置锚定" class="headerlink" title="1.3 位置锚定"></a>1.3 位置锚定</h3><p>位置锚定可以定位出现的位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">^               行首锚定，用于模式的最左侧</span><br><span class="line">$              行尾锚定，用于模式的最右侧</span><br><span class="line">^PATTERN$       模式匹配整行</span><br><span class="line">^$            匹配空行</span><br><span class="line">^[[:space:]]    空白行</span><br><span class="line">\&lt;              词首锚定</span><br><span class="line">\&gt;              词尾锚定</span><br><span class="line">\&lt;PATTERN\&gt;     匹配整个单词</span><br><span class="line"></span><br><span class="line">注：单词是由字母、数字、下划线组成，其他均为单词的分隔符</span><br><span class="line">如：http_122、788hhh 为单词；http-<span class="number">122</span>、<span class="number">788</span>:hhh 为两个单词</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">----------- 排除掉空行和<span class="string">&quot;#&quot;</span>开头的行 -----------</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep -v &#x27;^$&#x27; /etc/profile|grep -v &#x27;^#&#x27;</span></span><br><span class="line">[root@centos8 ~]<span class="comment">#grep &#x27;^[^$#]&#x27; /etc/profile</span></span><br></pre></td></tr></table></figure><h3 id="1-4-分组、或者"><a href="#1-4-分组、或者" class="headerlink" title="1.4 分组、或者"></a>1.4 分组、或者</h3><p><strong>分组：</strong>（）将多个字符捆绑在一起，当作一个整体处理，如：\(root\)</p><p><strong>后向引用：</strong>分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部的变量中，这些变量的命名方式为：\1,\2,\3,…（\1 表示从左侧第一个左括号与之匹配的右括号之间的模式匹配到的内容）</p><p>Example：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\(ab\+\(xy\)*\)：</span><br><span class="line">\1: ab\+\(xy\)*</span><br><span class="line">\2：xy</span><br><span class="line">后向引用：引用前面的分组括号中的模式所匹配到的字符（也就是匹配到的结果），而非模式本身。</span><br></pre></td></tr></table></figure><p><strong>或者：\|</strong></p><p>Example：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a\|ba或b</span><br><span class="line">c\|<span class="built_in">cat</span>c或<span class="built_in">cat</span></span><br><span class="line">\(C\|c\)atCat或<span class="built_in">cat</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-------------------- 排除空行和<span class="string">&#x27;#&#x27;</span>开头的行 ----------------------</span><br><span class="line">grep -v <span class="string">&#x27;^#&#x27;</span> /PATH/TO/FILE |grep -v ^$</span><br><span class="line">grep -v <span class="string">&#x27;^#\|^$&#x27;</span> /PATH/TO/FILE</span><br><span class="line">grep -v <span class="string">&#x27;^\(#\|$\)&#x27;</span> /PATH/TO/FILE</span><br><span class="line">grep <span class="string">&quot;^[^#]&quot;</span> /PATH/TO/FILE</span><br></pre></td></tr></table></figure><h3 id="正则表达式练习"><a href="#正则表达式练习" class="headerlink" title="正则表达式练习"></a>正则表达式练习</h3><p><strong>1、显示/proc/meminfo文件中以大小s开头的行(要求：使用两种方法)</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini tmp]<span class="comment"># grep &quot;^[Ss]&quot; /proc/meminfo</span></span><br><span class="line">[root@Rocky8-mini tmp]<span class="comment"># grep -i &quot;^s&quot; meminfo /proc/meminfo</span></span><br></pre></td></tr></table></figure><p><strong>2、显示/etc/passwd文件中不以/bin/bash结尾的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini tmp]<span class="comment"># grep -v  &quot;/bin/bash$&quot; /etc/passwd</span></span><br></pre></td></tr></table></figure><p><strong>3、显示用户rpc默认的shell程序</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep &quot;^\&lt;rpc\&gt;&quot; /etc/passwd | cut -d: -f7</span></span><br></pre></td></tr></table></figure><p><strong>4、找出/etc/passwd中的两位或三位数</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep &quot;\&lt;[0-9]\&#123;2,3\&#125;\&gt;&quot; /etc/passwd</span></span><br></pre></td></tr></table></figure><p><strong>5、显示CentOS7的/etc/grub2.cfg文件中，至少以一个空白字符开头的且后面有非空白字符的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># grep &quot;^[[:space:]]\+[[:alnum:]].*&quot; /etc/grub2.cfg</span></span><br></pre></td></tr></table></figure><p><strong>6、找出“netstat -tan”命令结果中以LISTEN后跟任意多个空白字符结尾的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># netstat -tan | grep &quot;\(LISTEN[[:space:]]*\)$&quot;</span></span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN</span><br></pre></td></tr></table></figure><p><strong>7、显示CentOS8上所有UID小于1000以内的用户名和UID</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat /etc/passwd | cut -d: -f1,3 | grep &quot;\&lt;[0-9]\&#123;1,3\&#125;\&gt;&quot;</span></span><br></pre></td></tr></table></figure><p><strong>8、添加用户bash、testbash、basher、sh、nologin(其shell为/sbin/nologin),找出/etc/passwd用户名和shell同名的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># grep &quot;^\(\&lt;[[:alnum:]]\+\&gt;\).*\1$&quot; /etc/passwd</span></span><br></pre></td></tr></table></figure><p><strong>9、利用df和grep，取出磁盘各分区利用率，并从大到小排序</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># df | grep &quot;^/dev&quot; | tr -s &#x27; &#x27; % | cut -d% -f1,5 --output-delimiter=&#x27;   &#x27; | sort -nr</span></span><br><span class="line">/dev/sda1   21</span><br><span class="line">/dev/mapper/rl-root   7</span><br><span class="line">/dev/mapper/rl-data   1</span><br></pre></td></tr></table></figure><h2 id="二、扩展正则表达式元字符"><a href="#二、扩展正则表达式元字符" class="headerlink" title="二、扩展正则表达式元字符"></a>二、扩展正则表达式元字符</h2><p>扩展正则表达式元字符同基本正则表达式元字符，只是不需要加转义字符，词首锚定和词尾锚定仍然需要。</p><h3 id="扩展正则表达式练习"><a href="#扩展正则表达式练习" class="headerlink" title="扩展正则表达式练习"></a>扩展正则表达式练习</h3><p><strong>1、显示三个用户root、mage、wang的UID和默认shell</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># grep -E &quot;^(\&lt;root\&gt;|\&lt;mage\&gt;|\&lt;wang\&gt;)&quot; /etc/passwd | cut -d: -f3,7</span></span><br><span class="line">0:/bin/bash</span><br><span class="line">1000:/bin/bash</span><br><span class="line">1001:/bin/bash</span><br></pre></td></tr></table></figure><p><strong>2、找出/etc/rc.d/init.d/functions文件中行首为某单词(包括下划线)后面跟一个小括号的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># grep -E &quot;^[_[:alnum:]]+\(\)&quot; /etc/rc.d/init.d/functions </span></span><br></pre></td></tr></table></figure><p><strong>3、使用egrep取出/etc/rc.d/init.d/functions中其基名</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># basename /etc/rc.d/init.d/functions</span></span><br><span class="line"><span class="built_in">functions</span></span><br></pre></td></tr></table></figure><p><strong>4、使用egrep取出上面路径的目录名</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># dirname /etc/rc.d/init.d/functions</span></span><br><span class="line">/etc/rc.d/init.d</span><br></pre></td></tr></table></figure><p><strong>5、统计last命令中以root登录的每个主机IP地址登录次数</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># last | grep -E &quot;\&lt;root\&gt;&quot; | grep -Eo &quot;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&quot; | sort | uniq -c</span></span><br></pre></td></tr></table></figure><p><strong>6、利用扩展正则表达式分别表示0-9、10-99、100-199、200-249、250-255</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&quot;\&lt;[0-9]\&gt;&quot;</span> num.txt</span><br><span class="line">grep -E <span class="string">&quot;\&lt;[0-9]&#123;2&#125;\&gt;&quot;</span> num.txt</span><br><span class="line">grep -E <span class="string">&quot;\&lt;1[0-9]&#123;2&#125;\&gt;&quot;</span> num.txt</span><br><span class="line">grep -E <span class="string">&quot;\&lt;2[0-4][0-9]\&gt;&quot;</span> num.txt</span><br><span class="line">grep -E <span class="string">&quot;\&lt;25[0-5]\&gt;&quot;</span> num.txt</span><br></pre></td></tr></table></figure><p><strong>7、显示ifconfig命令结果中所有IPv4地址</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># ifconfig | grep -Eo &quot;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&quot;</span></span><br></pre></td></tr></table></figure><p><strong>8、将此字符串：welcome to wuhao linux 中的每个字符去重并排序，重复次数多的排到前面</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo ‘welcome to wuhao linux’ | grep -o &quot;[[:alpha:]]&quot; | sort | uniq -c | sort -nr</span></span><br><span class="line">      3 o</span><br><span class="line">      2 w</span><br><span class="line">      2 u</span><br><span class="line">      2 l</span><br><span class="line">      2 e</span><br><span class="line">      1 x</span><br><span class="line">      1 t</span><br><span class="line">      1 n</span><br><span class="line">      1 m</span><br><span class="line">      1 i</span><br><span class="line">      1 h</span><br><span class="line">      1 c</span><br><span class="line">      1 a</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux基础入门和帮助</title>
      <link href="/archives/c31ae19.html"/>
      <url>/archives/c31ae19.html</url>
      
        <content type="html"><![CDATA[<h3 id="一、冯·洛依曼计算机体系结构"><a href="#一、冯·洛依曼计算机体系结构" class="headerlink" title="一、冯·洛依曼计算机体系结构"></a>一、冯·洛依曼计算机体系结构</h3><p><strong>1、结构图</strong></p><img src="https://cdn.jsdelivr.net/gh/wuhaolam/picgo_demo/img/R-C.jpg" style="zoom: 67%;" /><p><strong>2、特点</strong></p><ul><li>指令和数据采用二进制表示</li><li>指令在存储器中按顺序存放</li><li>指令和数据以相同形式存放与存储器中</li><li>指令有操作码和地址码组成</li><li>计算机有运算器、存储器、控制器、输入设备和输出设备五大部件组成</li></ul><h3 id="二、进制转换"><a href="#二、进制转换" class="headerlink" title="二、进制转换"></a>二、进制转换</h3><p><strong>1、bc 命令（进制之间的转换，默认为10进制）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-en ~]<span class="comment"># bc</span></span><br><span class="line">bc 1.07.1</span><br><span class="line">Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006, 2008, 2012-2017 Free Software Foundation, Inc.</span><br><span class="line">This is free software with ABSOLUTELY NO WARRANTY.</span><br><span class="line">For details <span class="built_in">type</span> `warranty<span class="string">&#x27;. </span></span><br><span class="line"><span class="string">2*3</span></span><br><span class="line"><span class="string">6          // 默认为10进制，得计算结果</span></span><br><span class="line"><span class="string">ibase=2    // 设定输入的数字类型为二进制，输出默认为10进制</span></span><br><span class="line"><span class="string">110</span></span><br><span class="line"><span class="string">6</span></span><br><span class="line"><span class="string">quit</span></span><br><span class="line"><span class="string">[root@Rocky8-en ~]# bc</span></span><br><span class="line"><span class="string">bc 1.07.1</span></span><br><span class="line"><span class="string">Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006, 2008, 2012-2017 Free Software Foundation, Inc.</span></span><br><span class="line"><span class="string">This is free software with ABSOLUTELY NO WARRANTY.</span></span><br><span class="line"><span class="string">For details type `warranty&#x27;</span>.</span><br><span class="line">obase=2    // 设定输出的类型为二进制，默认输入为十进制</span><br><span class="line">8</span><br><span class="line">1000</span><br><span class="line">9</span><br><span class="line">1001</span><br></pre></td></tr></table></figure><p><strong>2、各进制之间的转换</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-十进制转二进制-</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># echo &quot;obase=2;9&quot; | bc      // 将十进制9转化为二进制输出</span></span><br><span class="line">1001</span><br><span class="line">-八进制转十进制-</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># echo &quot;obase=10;ibase=8;11&quot; | bc </span></span><br><span class="line">9</span><br><span class="line">-二进制转十进制-</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># echo &quot;obase=10;ibase=2;110&quot; | bc</span></span><br><span class="line">6</span><br><span class="line">-二进制转十六进制-</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># echo &quot;obase=16;ibase=2;10010&quot; | bc</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><h3 id="三、Unix-的哲学思想"><a href="#三、Unix-的哲学思想" class="headerlink" title="三、Unix 的哲学思想"></a>三、Unix 的哲学思想</h3><ul><li>一切皆文件<ul><li>不管是普通的文件，还是目录、字符设备、快设备、套接字等在Unix中都是以文件形式对待，采用统一的接口被提供</li></ul></li><li>配置数据存储在文本中<ul><li>Linux中大部分配置文件存放在文本中，方便我们进行修改来解决一些发生的错误；像Windows中的程序配置文件放在注册表中，注册表采用若干个二进制文件，出错很难修改。</li></ul></li><li>提供许多小型的单一用途的程序<ul><li>使用单一的程序就可以完成相应的操作</li></ul></li><li>避免令人困惑的用户界面<ul><li>更多的采用字符界面，图形界面会产生一些虚假的现象，执行过程中不稳定</li></ul></li><li>连接程序，完成复杂的功能<ul><li>某些复杂的任务，可以连接多个简单的程序来实现其复杂的功能。像编写SHELL程序。</li></ul></li></ul><h3 id="四、SHELL"><a href="#四、SHELL" class="headerlink" title="四、SHELL"></a>四、SHELL</h3><p>​    Shell是Linux系统的用户界面，提供了用户与内核进行交互操作的一种接口。它接收用户输入的命令并把它送入内核去执行。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 显示当前使用的shell</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># echo $SHELL</span></span><br><span class="line">/bin/bash</span><br><span class="line">-- 显示当前系统使用的所有shell</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat /etc/shells</span></span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">wh@unbuntu18:~$ <span class="built_in">cat</span> /etc/shells</span><br><span class="line"><span class="comment"># /etc/shells: valid login shells</span></span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/bin/rbash</span><br><span class="line">/bin/dash</span><br></pre></td></tr></table></figure><h4 id="4-1-Shell中执行的命令"><a href="#4-1-Shell中执行的命令" class="headerlink" title="4.1 Shell中执行的命令"></a>4.1 Shell中执行的命令</h4><h5 id="4-1-1-shell-中可执行的两类命令"><a href="#4-1-1-shell-中可执行的两类命令" class="headerlink" title="4.1.1 shell 中可执行的两类命令"></a>4.1.1 shell 中可执行的两类命令</h5><ul><li>内部命令：由shell自带的，而且通过某命令形式提供，用户登录后自动加载并常驻内存中</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- <span class="built_in">type</span> 判断指定的命令时外部命令还是内部命令</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># type  -a cat       // 外部命令</span></span><br><span class="line"><span class="built_in">cat</span> is /usr/bin/cat</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># type -a echo      // 内部命令也是外部命令</span></span><br><span class="line"><span class="built_in">echo</span> is a shell <span class="built_in">builtin</span></span><br><span class="line"><span class="built_in">echo</span> is /usr/bin/echo</span><br><span class="line">-- 列出当前shell所有的内部命令</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># enable </span></span><br><span class="line"><span class="built_in">enable</span> .</span><br><span class="line"><span class="built_in">enable</span> :</span><br><span class="line"><span class="built_in">enable</span> [</span><br><span class="line"><span class="built_in">enable</span> <span class="built_in">alias</span></span><br><span class="line"><span class="built_in">enable</span> <span class="built_in">bg</span></span><br><span class="line"><span class="built_in">enable</span> <span class="built_in">bind</span></span><br><span class="line"><span class="built_in">enable</span> <span class="built_in">break</span></span><br><span class="line"><span class="built_in">enable</span> <span class="built_in">builtin</span></span><br><span class="line"><span class="built_in">enable</span> <span class="built_in">caller</span></span><br><span class="line"><span class="built_in">enable</span> <span class="built_in">cd</span></span><br><span class="line">···</span><br><span class="line">···</span><br><span class="line"><span class="built_in">enable</span> <span class="built_in">wait</span></span><br></pre></td></tr></table></figure><ul><li>外部命令：在文件系统路径下有对应的可执行程序文件，当执行命令时才从磁盘加载至内存中，执行完毕后从内存中删除</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 查看外部名令的路径</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># which cat</span></span><br><span class="line">/usr/bin/cat</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># whereis cat</span></span><br><span class="line"><span class="built_in">cat</span>: /usr/bin/cat /usr/share/man/man1/cat.1.gz /usr/share/man/man1p/cat.1p.gz</span><br></pre></td></tr></table></figure><ul><li>Hash缓存表</li></ul><p>​    系统初始时hash表为空，当外部命令执行时，默认会从PATH路径下寻找该命令，找到后会将这条命令的路径记录到hash表中，当在此使用该命令时，shell解释器首先查看hash表。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">常见用法</span><br><span class="line"><span class="built_in">hash</span> 显示<span class="built_in">hash</span>缓存</span><br><span class="line"><span class="built_in">hash</span> -l 显示<span class="built_in">hash</span>缓存，可作为输入使用</span><br><span class="line"><span class="built_in">hash</span> -p PATH NAME 将命令全路径path起别名为name</span><br><span class="line"><span class="built_in">hash</span> -t NAME 打印缓存中命令的路径</span><br><span class="line"><span class="built_in">hash</span> -d NAME 清除指定命令缓存</span><br><span class="line"><span class="built_in">hash</span> -r 清除缓存</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># hash -t clock</span></span><br><span class="line">/usr/sbin/clock</span><br><span class="line">=========================================================================</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># hash -l</span></span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/bin/dnf dnf</span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/bin/screen screen</span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/bin/systemctl systemctl</span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/bin/vim vim</span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/bin/date <span class="built_in">date</span></span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/bin/uname <span class="built_in">uname</span></span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/bin/who <span class="built_in">who</span></span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/bin/whoami <span class="built_in">whoami</span></span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/bin/man man</span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/sbin/shutdown shutdown</span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/sbin/clock clock</span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">hash</span> -p /usr/sbin/hwclock hwclock</span><br><span class="line">===========================================================================</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># hash -d clock</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># hash</span></span><br><span class="line">hits    <span class="built_in">command</span></span><br><span class="line">   1    /usr/bin/dnf</span><br><span class="line">   1    /usr/bin/screen</span><br><span class="line">   1    /usr/bin/systemctl</span><br><span class="line">   1    /usr/bin/vim</span><br><span class="line">   5    /usr/bin/date</span><br><span class="line">   1    /usr/bin/uname</span><br><span class="line">   1    /usr/bin/who</span><br><span class="line">   1    /usr/bin/whoami</span><br><span class="line">   2    /usr/bin/man</span><br><span class="line">   8    /usr/sbin/shutdown</span><br><span class="line">   3    /usr/sbin/hwclock</span><br><span class="line">==============================================================================</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># hash -r</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># hash</span></span><br><span class="line"><span class="built_in">hash</span>: <span class="built_in">hash</span> table empty   </span><br></pre></td></tr></table></figure><h5 id="4-1-2、命令别名"><a href="#4-1-2、命令别名" class="headerlink" title="4.1.2、命令别名"></a>4.1.2、命令别名</h5><p>​    对于经常执行的较长命令，可以将其定义为较短的别名，方便执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-- 显示当前shell进程所有可用的命令别名</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># alias</span></span><br><span class="line"></span><br><span class="line">-- 定义别名     <span class="built_in">alias</span> 新名=<span class="string">&#x27;需要定义别名的命令&#x27;</span></span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># ls /etc/yum.repos.d/</span></span><br><span class="line">CentOS-Base.repo  epel-modular.repo  epel.repo  epel-testing-modular.repo  epel-testing.repo</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># alias lsrepo=&#x27;ls /etc/yum.repos.d&#x27;</span></span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># lsrepo</span></span><br><span class="line">CentOS-Base.repo  epel-modular.repo  epel.repo  epel-testing-modular.repo  epel-testing.repo</span><br><span class="line"></span><br><span class="line">-- 取消别名  <span class="built_in">unalias</span> 别名</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># unalias lsrepo</span></span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># lsrepo</span></span><br><span class="line">bash: lsrepo: <span class="built_in">command</span> not found...</span><br><span class="line"></span><br><span class="line">-- 定义别名配置永久有效</span><br><span class="line">* 仅对当前用户~/.bashrc</span><br><span class="line">* 对所有用户     /etc/bashrc</span><br><span class="line"></span><br><span class="line">-- 如果别名同原命令，仍然向执行原命令</span><br><span class="line">\ALIASNAME</span><br><span class="line"><span class="string">&#x27;ALIASNAME&#x27;</span></span><br></pre></td></tr></table></figure><h5 id="4-1-3-命令的执行次序"><a href="#4-1-3-命令的执行次序" class="headerlink" title="4.1.3 命令的执行次序"></a>4.1.3 命令的执行次序</h5><ul><li>系统先判断是否是别名，如果是就立即执行</li><li>如果不是别名，判断是否是内部命令，是就执行</li><li>如果不是内部命令，查询hash对应的缓存区中是否有此命令对应的路径，如果有就按照此路径在磁盘上查找此命令的文件并执行。如果找不到对应的文件，无法执行此命令。</li><li>如果在hash缓存区中没有对应的命令，则按照PATH系统变量指定的路径进行搜索，如果找到了，则立刻执行，停止向后查找。</li><li>如果在PATH系统变量中也无法查找到，则提示没有此命令。</li></ul><h3 id="五、常见命令"><a href="#五、常见命令" class="headerlink" title="五、常见命令"></a>五、常见命令</h3><h4 id="5-1-查看当前所在的终端"><a href="#5-1-查看当前所在的终端" class="headerlink" title="5.1 查看当前所在的终端"></a>5.1 查看当前所在的终端</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-en ~]<span class="comment"># tty</span></span><br><span class="line">/dev/pts/0// 伪终端</span><br><span class="line">[root@Rocky8-en ~]<span class="comment"># tty</span></span><br><span class="line">/dev/tty1// 虚拟终端</span><br></pre></td></tr></table></figure><h4 id="5-2-设置主机名"><a href="#5-2-设置主机名" class="headerlink" title="5.2 设置主机名"></a>5.2 设置主机名</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 临时生效</span><br><span class="line">hostname NAME</span><br><span class="line">-- 永久生效（CentOS7和Ubuntu18.04以上版本）</span><br><span class="line">hostnamectl set-hostname NAME</span><br></pre></td></tr></table></figure><h4 id="5-3-查看-CPU的架构信息"><a href="#5-3-查看-CPU的架构信息" class="headerlink" title="5.3 查看 CPU的架构信息"></a>5.3 查看 CPU的架构信息</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># lscpu</span></span><br><span class="line">Architecture:        x86_64                      //  cpu架构信息</span><br><span class="line">CPU op-mode(s):      32-bit, 64-bit</span><br><span class="line">Byte Order:          Little Endian</span><br><span class="line">CPU(s):              2//  虚拟机的cpu核数</span><br><span class="line">On-line CPU(s) list: 0,1</span><br><span class="line">Thread(s) per core:  1</span><br><span class="line">Core(s) per socket:  2</span><br><span class="line">Socket(s):           1</span><br><span class="line">NUMA node(s):        1</span><br><span class="line">Vendor ID:           GenuineIntel</span><br><span class="line">BIOS Vendor ID:      GenuineIntel</span><br><span class="line">CPU family:          6</span><br><span class="line">Model:               142</span><br><span class="line">Model name:          Intel(R) Core(TM) i5-7200U CPU @ 2.50GHz            // 物理机的CPU型号</span><br><span class="line">BIOS Model name:     Intel(R) Core(TM) i5-7200U CPU @ 2.50GHz</span><br><span class="line">Stepping:            9</span><br><span class="line">CPU MHz:             2712.002</span><br><span class="line">BogoMIPS:            5424.00</span><br><span class="line">Hypervisor vendor:   VMware</span><br><span class="line">Virtualization <span class="built_in">type</span>: full</span><br><span class="line">L1d cache:           32K</span><br><span class="line">L1i cache:           32K</span><br><span class="line">L2 cache:            256K</span><br><span class="line">L3 cache:            3072K</span><br><span class="line">NUMA node0 CPU(s):   0,1</span><br><span class="line">Flags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch cpuid_fault invpcid_single pti ssbd ibrs ibpb stibp fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid rdseed adx smap clflushopt xsaveopt xsavec xgetbv1 xsaves arat md_clear flush_l1d arch_capabilities</span><br><span class="line">=========================================================================================</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat /proc/cpuinfo      // 将每一个cpu的完整信息展现出来</span></span><br><span class="line">processor       : 0</span><br><span class="line">vendor_id       : GenuineIntel</span><br><span class="line">cpu family      : 6</span><br><span class="line">model           : 142</span><br><span class="line">model name      : Intel(R) Core(TM) i5-7200U CPU @ 2.50GHz</span><br><span class="line">stepping        : 9</span><br><span class="line">microcode       : 0xc6</span><br><span class="line">cpu MHz         : 2712.002</span><br><span class="line">cache size      : 3072 KB</span><br><span class="line">physical <span class="built_in">id</span>     : 0</span><br><span class="line">siblings        : 2</span><br><span class="line">core <span class="built_in">id</span>         : 0</span><br><span class="line">cpu cores       : 2</span><br><span class="line">apicid          : 0</span><br><span class="line">initial apicid  : 0</span><br><span class="line">fpu             : <span class="built_in">yes</span></span><br><span class="line">fpu_exception   : <span class="built_in">yes</span></span><br><span class="line">cpuid level     : 22</span><br><span class="line">wp              : <span class="built_in">yes</span></span><br><span class="line">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch cpuid_fault invpcid_single pti ssbd ibrs ibpb stibp fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid rdseed adx smap clflushopt xsaveopt xsavec xgetbv1 xsaves arat md_clear flush_l1d arch_capabilities</span><br><span class="line">bugs            : cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf mds swapgs itlb_multihit srbds</span><br><span class="line">bogomips        : 5424.00</span><br><span class="line">clflush size    : 64</span><br><span class="line">cache_alignment : 64</span><br><span class="line">address sizes   : 45 bits physical, 48 bits virtual</span><br><span class="line">power management:</span><br><span class="line"></span><br><span class="line">processor       : 1</span><br><span class="line">vendor_id       : GenuineIntel</span><br><span class="line">cpu family      : 6</span><br><span class="line">model           : 142</span><br><span class="line">model name      : Intel(R) Core(TM) i5-7200U CPU @ 2.50GHz</span><br><span class="line">stepping        : 9</span><br><span class="line">microcode       : 0xc6</span><br><span class="line">cpu MHz         : 2712.002</span><br><span class="line">cache size      : 3072 KB</span><br><span class="line">physical <span class="built_in">id</span>     : 0</span><br><span class="line">siblings        : 2</span><br><span class="line">core <span class="built_in">id</span>         : 1</span><br><span class="line">cpu cores       : 2</span><br><span class="line">apicid          : 1</span><br><span class="line">initial apicid  : 1</span><br><span class="line">fpu             : <span class="built_in">yes</span></span><br><span class="line">fpu_exception   : <span class="built_in">yes</span></span><br><span class="line">cpuid level     : 22</span><br><span class="line">wp              : <span class="built_in">yes</span></span><br><span class="line">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch cpuid_fault invpcid_single pti ssbd ibrs ibpb stibp fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid rdseed adx smap clflushopt xsaveopt xsavec xgetbv1 xsaves arat md_clear flush_l1d arch_capabilities</span><br><span class="line">bugs            : cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf mds swapgs itlb_multihit srbds</span><br><span class="line">bogomips        : 5424.00</span><br><span class="line">clflush size    : 64</span><br><span class="line">cache_alignment : 64</span><br><span class="line">address sizes   : 45 bits physical, 48 bits virtual</span><br><span class="line">power management:</span><br></pre></td></tr></table></figure><h4 id="5-4-查看内存大小"><a href="#5-4-查看内存大小" class="headerlink" title="5.4 查看内存大小"></a>5.4 查看内存大小</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-- 展示系统内存的使用情况，-h 选项便于可读 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:          1.7Gi       254Mi       1.1Gi       8.0Mi       437Mi       1.3Gi</span><br><span class="line">Swap:         2.0Gi          0B       2.0Gi</span><br><span class="line">=========================================================================================</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat /proc/meminfo</span></span><br><span class="line">MemTotal:        1833232 kB</span><br><span class="line">MemFree:         1124496 kB</span><br><span class="line">MemAvailable:    1410600 kB</span><br><span class="line">Buffers:            3164 kB</span><br><span class="line">Cached:           400380 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           246284 kB</span><br><span class="line">Inactive:         257196 kB</span><br><span class="line">Active(anon):       1928 kB</span><br><span class="line">Inactive(anon):   106892 kB</span><br><span class="line">Active(file):     244356 kB</span><br><span class="line">Inactive(file):   150304 kB</span><br><span class="line">Unevictable:           0 kB</span><br><span class="line">Mlocked:               0 kB</span><br><span class="line">SwapTotal:       2129916 kB</span><br><span class="line">···</span><br><span class="line">···</span><br><span class="line">DirectMap1G:           0 kB</span><br></pre></td></tr></table></figure><h4 id="5-5-查看硬盘和分区情况"><a href="#5-5-查看硬盘和分区情况" class="headerlink" title="5.5 查看硬盘和分区情况"></a>5.5 查看硬盘和分区情况</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># lsblk      // 默认查看所有设备，也可后接设备，查看指定的设备</span></span><br><span class="line">NAME        MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda           8:0    0  50G  0 disk </span><br><span class="line">├─sda1        8:1    0   1G  0 part /boot</span><br><span class="line">└─sda2        8:2    0  49G  0 part </span><br><span class="line">  ├─rl-root 253:0    0  47G  0 lvm  /</span><br><span class="line">  └─rl-swap 253:1    0   2G  0 lvm  [SWAP]</span><br><span class="line">sr0          11:0    1  10G  0 rom  </span><br><span class="line">=========================================================================================</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat /proc/partitions</span></span><br><span class="line">major minor  <span class="comment">#blocks  name</span></span><br><span class="line"></span><br><span class="line">   8        0   52428800 sda</span><br><span class="line">   8        1    1048576 sda1</span><br><span class="line">   8        2   51379200 sda2</span><br><span class="line">  11        0   10465280 sr0</span><br><span class="line"> 253        0   49246208 dm-0</span><br><span class="line"> 253        1    2129920 dm-1</span><br></pre></td></tr></table></figure><h4 id="5-6-查看系统版本信息"><a href="#5-6-查看系统版本信息" class="headerlink" title="5.6 查看系统版本信息"></a>5.6 查看系统版本信息</h4><ul><li>查看系统架构</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># arch</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><ul><li>查看内核版本</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># uname -r</span></span><br><span class="line">4.18.0-348.el8.0.2.x86_64</span><br><span class="line">[root@centos7-mini ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-1160.el7.x86_64</span><br></pre></td></tr></table></figure><ul><li>查看操作系统发行版本</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">Rocky Linux release 8.5 (Green Obsidian)</span><br><span class="line">=========================================================================================</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat /etc/os-release</span></span><br><span class="line">NAME=<span class="string">&quot;Rocky Linux&quot;</span></span><br><span class="line">VERSION=<span class="string">&quot;8.5 (Green Obsidian)&quot;</span></span><br><span class="line">ID=<span class="string">&quot;rocky&quot;</span></span><br><span class="line">ID_LIKE=<span class="string">&quot;rhel centos fedora&quot;</span></span><br><span class="line">VERSION_ID=<span class="string">&quot;8.5&quot;</span></span><br><span class="line">PLATFORM_ID=<span class="string">&quot;platform:el8&quot;</span></span><br><span class="line">PRETTY_NAME=<span class="string">&quot;Rocky Linux 8.5 (Green Obsidian)&quot;</span></span><br><span class="line">ANSI_COLOR=<span class="string">&quot;0;32&quot;</span></span><br><span class="line">CPE_NAME=<span class="string">&quot;cpe:/o:rocky:rocky:8.5:GA&quot;</span></span><br><span class="line">HOME_URL=<span class="string">&quot;https://rockylinux.org/&quot;</span></span><br><span class="line">BUG_REPORT_URL=<span class="string">&quot;https://bugs.rockylinux.org/&quot;</span></span><br><span class="line">ROCKY_SUPPORT_PRODUCT=<span class="string">&quot;Rocky Linux&quot;</span></span><br><span class="line">ROCKY_SUPPORT_PRODUCT_VERSION=<span class="string">&quot;8&quot;</span></span><br></pre></td></tr></table></figure><h4 id="5-7-日期和时间"><a href="#5-7-日期和时间" class="headerlink" title="5.7 日期和时间"></a>5.7 日期和时间</h4><p>Linux的两种时钟：</p><ul><li>系统时钟    Linux内核通过CPU工作频率进行计时</li><li>硬件时钟    计算机主板的内部物理芯片计时</li></ul><p>（1）date </p><p>date - print or set the system date and time</p><p>date [OPTION]… [+FORMAT]<br>date [-u|–utc|–universal] [MMDDhhmm[[CC]YY][.ss]]</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- 显示当前默认时间格式 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># date   </span></span><br><span class="line">Wed Mar  2 01:56:39 EST 2022</span><br><span class="line">-- 只显示当前日期 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># date +%F</span></span><br><span class="line">2022-03-02</span><br><span class="line">-- 只显示当前的小时、分钟、秒数时间 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># date +%T</span></span><br><span class="line">02:12:05</span><br><span class="line">-- 显示昨天的日期 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># date -d &#x27;-1 day&#x27; +%F</span></span><br><span class="line">2022-03-01</span><br><span class="line">-- 设置当前的日期为明年的日期 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># date -s &#x27;1 year&#x27; +%F</span></span><br><span class="line">2023-03-02</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># date &quot;+%F %T&quot;</span></span><br><span class="line">2023-03-02 02:10:19</span><br><span class="line">-- 设置时间为2022年7月1日12点30分30秒 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># date 070112302022.30</span></span><br><span class="line">Fri Jul  1 12:30:30 EDT 2022</span><br></pre></td></tr></table></figure><p>（2）hwclock/clock   操作硬件时钟</p><p>-s    以硬件时间为准，设定系统时间</p><p>-w    以系统时间为准，设定硬件时间</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 显示硬件时间 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># hwclock </span></span><br><span class="line">2022-03-04 06:30:41.965061-05:00</span><br><span class="line">-- 调整系统时间 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># hwclock -s</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># clock;date</span></span><br><span class="line">2022-03-04 06:32:00.405387-05:00</span><br><span class="line">Fri Mar  4 06:32:00 EST 2022</span><br></pre></td></tr></table></figure><h4 id="5-8-关机和重启"><a href="#5-8-关机和重启" class="headerlink" title="5.8 关机和重启"></a>5.8 关机和重启</h4><p>关机：shutdown、halt、poweroff</p><p>重启：reboot</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">shutdown now 立刻关机</span><br><span class="line"> +<span class="comment"># #分钟之后关机</span></span><br><span class="line"> hh:mm    指明具体时间</span><br><span class="line"> -c  取消关机</span><br><span class="line"> -r 重启</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># shutdown 12:30   //十二点半关机</span></span><br><span class="line">Shutdown scheduled <span class="keyword">for</span> Fri 2022-03-04 12:30:00 EST, use <span class="string">&#x27;shutdown -c&#x27;</span> to cancel.</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># shutdown +5      // 五分钟后关机</span></span><br><span class="line">Shutdown scheduled <span class="keyword">for</span> Fri 2022-03-04 06:42:52 EST, use <span class="string">&#x27;shutdown -c&#x27;</span> to cancel.</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># date</span></span><br><span class="line">Fri Mar  4 06:37:58 EST 2022</span><br></pre></td></tr></table></figure><h4 id="5-9-用户登录信息查看"><a href="#5-9-用户登录信息查看" class="headerlink" title="5.9 用户登录信息查看"></a>5.9 用户登录信息查看</h4><p>whoami    显示当前登录的有效用户</p><p>who    显示系统当前所有的登录会话</p><p>w    显示系统当前所有的登录会话及所做的操作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># whoami</span></span><br><span class="line">root</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># who</span></span><br><span class="line">root     pts/0        2022-03-04 06:16 (192.168.84.1)</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># w</span></span><br><span class="line"> 06:49:03 up 48 min,  1 user,  load average: 0.00, 0.00, 0.00</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     pts/0    192.168.84.1     06:16    5.00s  0.15s  0.00s w</span><br></pre></td></tr></table></figure><h4 id="5-10-会话管理"><a href="#5-10-会话管理" class="headerlink" title="5.10 会话管理"></a>5.10 会话管理</h4><p>​        当我们打开一个终端窗口的时候，终端的窗口与启动的进程连接在一起。如果此时窗口突然关闭了，那我们正在执行的某个进程也会终止。使用会话，可以在终端窗口不正常关闭的同时，依然保存着他当前的会话。</p><img src="https://cdn.jsdelivr.net/gh/wuhaolam/picgo_demo/img/2704859-20220304234120701-648595415.png" alt="image" style="zoom: 50%;" /><p>删除掉此screen会话，在新建一个正常会话，查看ping命令是否还在继续执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># ps aux | grep ping      // ping 命令还在继续执行</span></span><br><span class="line">root        2464  0.0  0.2  55252  5012 pts/0    S+   10:09   0:00 ping www.baidu.com</span><br><span class="line">root        2495  0.0  0.0  12136  1176 pts/3    S+   10:14   0:00 grep --color=auto ping</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># kill -15 2464         // 终止此命令</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># ps aux | grep ping</span></span><br><span class="line">root        2497  0.0  0.0  12136  1176 pts/3    S+   10:14   0:00 grep --color=auto ping</span><br></pre></td></tr></table></figure><h4 id="5-11-命令行历史（history）"><a href="#5-11-命令行历史（history）" class="headerlink" title="5.11 命令行历史（history）"></a>5.11 命令行历史（history）</h4><p>​        当执行一条命令时，系统会在内存记录执行过的命令，当用户退出时，会将内存的命令写入对应的历史文件中（~/.bash_history）</p><p>常用选项：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-c：清空命令历史</span><br><span class="line">-d NUMBER：删除历史中指定的第几条命令</span><br><span class="line">n：显示最近到的n条历史</span><br><span class="line">-a：追加新执行的命令到历史文件中</span><br></pre></td></tr></table></figure><p>命令历史环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HISTSIZE：命令历史记录的条数</span><br><span class="line">HISTFILE：指定历史文件，默认为~/.bash_history</span><br><span class="line">HISTFILESIZE：命令历史文件记录历史的条数</span><br><span class="line">HISTTIMEFORMAT=<span class="string">&quot;%F %T `whoami` &quot;</span> 显示时间和用户</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">-- 设置查看命令历史时可以查看执行的时间 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># export HISTTIMEFORMAT=&quot;%F %T&quot;</span></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># history | head</span></span><br><span class="line">    1  2022-03-04 10:11:16ip a</span><br><span class="line">    2  2022-03-04 10:11:16systemctl restart network</span><br><span class="line">    3  2022-03-04 10:11:16systemctl restart network-manager</span><br><span class="line">    4  2022-03-04 10:11:16quit</span><br><span class="line">    5  2022-03-04 10:11:16exit</span><br><span class="line">    6  2022-03-04 10:11:16ls]</span><br><span class="line">    7  2022-03-04 10:11:16ls</span><br><span class="line">    8  2022-03-04 10:11:16cd /root</span><br><span class="line">    9  2022-03-04 10:11:16ls</span><br><span class="line">   10  2022-03-04 10:11:16cd /honme</span><br><span class="line">==============================================================================</span><br><span class="line">-- 如果需要永久存储，需要写进配置文件中 --</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat ~/.bash_profile</span></span><br><span class="line"><span class="comment"># .bash_profile</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the aliases and functions</span></span><br><span class="line"><span class="keyword">if</span> [ -f ~/.bashrc ]; <span class="keyword">then</span></span><br><span class="line">        . ~/.bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User specific environment and startup programs</span></span><br><span class="line"></span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH</span><br><span class="line"><span class="built_in">export</span> HISTTIMEFORMAT=<span class="string">&quot;%F %T&quot;</span></span><br></pre></td></tr></table></figure><h4 id="5-12-tr"><a href="#5-12-tr" class="headerlink" title="5.12 tr"></a>5.12 tr</h4><p>​    tr 命令可以接受标准输入并按指定规则进行转换</p><p>SYNOPSIS<br>                tr [OPTION]… SET1 [SET2]</p><p>常用选项</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-c, -C, --complementuse the complement of SET1</span><br><span class="line">-d, --deletedelete characters <span class="keyword">in</span> SET1, <span class="keyword">do</span> not translate</span><br><span class="line">-s, --squeeze-repeats 将最后指定的 SET 中列出的重复字符的每个序列替换为该字符的单个匹配项</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini <span class="built_in">test</span>]<span class="comment"># cat /dev/urandom | tr -dc [:alnum:] | echo `head -c 8`</span></span><br><span class="line">Q9WE83YS</span><br><span class="line">[root@Rocky8-mini <span class="built_in">test</span>]<span class="comment"># echo Ixamxwh | tr -s x &quot; &quot;</span></span><br><span class="line">I am wh</span><br></pre></td></tr></table></figure><h4 id="5-13-输出信息-echo"><a href="#5-13-输出信息-echo" class="headerlink" title="5.13 输出信息 echo"></a>5.13 输出信息 echo</h4><h5 id="5-13-1-基础用法"><a href="#5-13-1-基础用法" class="headerlink" title="5.13.1 基础用法"></a>5.13.1 基础用法</h5><p>​    将echo后面的字符进行输出，默认以空白字符分隔。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">option：</span><br><span class="line">-E 不支持转义（默认）</span><br><span class="line">-n 不自动换行</span><br><span class="line">-e 启用 <span class="string">&#x27;\&#x27;</span> 字符功能 </span><br></pre></td></tr></table></figure><p>​    显示变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$var_name</span>&quot;</span>弱引用，会输出变量的值</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$var_name&#x27;</span>强引用，变量的值不会输出</span><br><span class="line"></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo &quot;$PATH&quot;</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo &#x27;$PATH&#x27;</span></span><br><span class="line"><span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>​    使用-e选项后支持的转义符号及所表达的意思</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">\\     backslash</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo -e \\</span></span><br><span class="line">\</span><br><span class="line"></span><br><span class="line">\a     alert (BEL)</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo -e &#x27;\a&#x27;</span></span><br><span class="line"></span><br><span class="line">\b     backspace</span><br><span class="line"></span><br><span class="line">\c     produce no further output</span><br><span class="line"></span><br><span class="line">\e     escape</span><br><span class="line"></span><br><span class="line">\f     form feed</span><br><span class="line"></span><br><span class="line">\n     new line换行</span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># echo -e &#x27;abc\nasdf&#x27;</span></span><br><span class="line">abc</span><br><span class="line">asdf</span><br><span class="line"></span><br><span class="line">\r     carriage <span class="built_in">return</span>回车，光标移至行首，但不换行</span><br><span class="line"></span><br><span class="line">\t     horizontal tab</span><br><span class="line"></span><br><span class="line">\v     vertical tab</span><br><span class="line"></span><br><span class="line">\0NNN  byte with octal value NNN (1 to 3 digits)</span><br><span class="line"></span><br><span class="line">\xHH   byte with hexadecimal value HH (1 to 2 digits)</span><br></pre></td></tr></table></figure><h5 id="5-13-2-高级用法"><a href="#5-13-2-高级用法" class="headerlink" title="5.13.2 高级用法"></a>5.13.2 高级用法</h5><p>​    在终端中，可以输出带有颜色的字符。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;\033[字符背景颜色;字体颜色m字符串\033[0m&quot;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字体颜色范围：30--37</span></span><br><span class="line">30 黑</span><br><span class="line">31 红</span><br><span class="line">32 绿</span><br><span class="line">33 黄</span><br><span class="line">34 蓝</span><br><span class="line">35 紫</span><br><span class="line">36 深绿</span><br><span class="line">37 白</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符背景颜色范围：40--47</span></span><br><span class="line">40 黑</span><br><span class="line">41 红</span><br><span class="line">42 绿</span><br><span class="line">43 黄</span><br><span class="line">44 蓝</span><br><span class="line">45 紫</span><br><span class="line">46 深绿</span><br><span class="line">47 白</span><br></pre></td></tr></table></figure><h3 id="六、命令行历史（history）"><a href="#六、命令行历史（history）" class="headerlink" title="六、命令行历史（history）"></a>六、命令行历史（history）</h3><p>​    在终端执行命令后，系统会在内存记录执行过的命令。当用户正常退出时，会将内存中保存的命令写入到对于应的历史文件中，默认是<code>~/.bash_history</code>。当再一次登录到shell时，会读取历史文件中记录的命令到内存中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">常用选项：</span><br><span class="line">-c清空命令历史</span><br><span class="line">-d offset删除历史中指定的第offset命令</span><br><span class="line">n显示最近的n跳命令</span><br><span class="line">-a手动将新执行的命令列表写入到历史文件中</span><br><span class="line">-w保存历史列表到指定的历史文件</span><br></pre></td></tr></table></figure><p><strong>命令历史相关环境变量</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HISTSIZE命令历史记录的条数</span><br><span class="line"></span><br><span class="line">HISTFILE指定存储命令历史的文件，默认~/.bash_history</span><br><span class="line"></span><br><span class="line">HISTFILESIZE命令历史文件记录历史命令的条数</span><br><span class="line"></span><br><span class="line">HISTTIMEFORMAT=<span class="string">&quot;%F %T `whoami`&quot;</span>显示时间和用户</span><br><span class="line"></span><br><span class="line">HISTCONTROL控制命令历史的记录方式</span><br><span class="line">ignoredups默认，忽略重复的命令，相同且连续为“重复”</span><br><span class="line">ignorespace忽略所有以空白开头的命令</span><br><span class="line">ignoreboth相当于ignoredups，ignorespace的组合</span><br><span class="line">erasedups删除重复命令</span><br></pre></td></tr></table></figure><p><strong>持久保存变量</strong></p><p>​    使用 export 变量名=”值” 的形式存放在 /etc/profile 或 ~/.bash_profile 中实现永久保存。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky8-mini ~]<span class="comment"># cat ./.bash_profile</span></span><br><span class="line"><span class="comment"># .bash_profile</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the aliases and functions</span></span><br><span class="line"><span class="keyword">if</span> [ -f ~/.bashrc ]; <span class="keyword">then</span></span><br><span class="line">. ~/.bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User specific environment and startup programs</span></span><br><span class="line"></span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH</span><br><span class="line"><span class="built_in">export</span> HISTCONTROL=ignoreboth</span><br><span class="line"><span class="built_in">export</span> HISTTIMEFORMAT=<span class="string">&quot;%F %T &quot;</span></span><br><span class="line"></span><br><span class="line">[root@Rocky8-mini ~]<span class="comment"># history 2</span></span><br><span class="line">  999  2022-08-16 08:02:43 <span class="built_in">exit</span></span><br><span class="line"> 1000  2022-08-16 08:02:47 <span class="built_in">history</span> 2</span><br></pre></td></tr></table></figure><h3 id="七、BASH快捷键"><a href="#七、BASH快捷键" class="headerlink" title="七、BASH快捷键"></a>七、BASH快捷键</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Ctrl + l清屏，相当于clear命令</span><br><span class="line">Ctrl + s阻止屏幕输出</span><br><span class="line">Ctrl + q允许屏幕输出</span><br><span class="line">Ctrl + c终止命令</span><br><span class="line">Ctrl + z挂起命令</span><br><span class="line">Ctrl + a光标移动到行首</span><br><span class="line">Ctrl + e光标移动到行尾</span><br><span class="line">Ctrl + u从光标处删除至命令行首</span><br><span class="line">Ctrl + k从光标处删除至命令行尾</span><br><span class="line">Alt + r删除整行</span><br><span class="line">Ctrl + w从光标处向左删除单词首</span><br><span class="line">Alt + d从光标处向右删除至词尾</span><br></pre></td></tr></table></figure><p>​    注：为了防止Alt快捷键与其他软件冲突，在 Xshell 中启动自己的Alt键</p><img src="https://cdn.jsdelivr.net/gh/wuhaolam/picgo_demo/img/image-20220816201742468.png" alt="image-20220816201742468" style="zoom: 80%;" />]]></content>
      
      
      <categories>
          
          <category> Linux基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux基础 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
